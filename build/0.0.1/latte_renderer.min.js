!function(){function t(t){var e=function(t,e){return o("",t,e)},r=i;t&&(i[t]||(i[t]={}),r=i[t]),r.define&&r.define.packaged||(n.original=r.define,r.define=n,r.define.packaged=!0),r.require&&r.require.packaged||(o.original=r.require,r.require=e,r.require.packaged=!0)}var e="latte",i=function(){return this}();if(e||"undefined"==typeof requirejs){var n=function(t,e,i){return"string"!=typeof t?void(n.original?n.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(i=e),n.modules||(n.modules={},n.payloads={}),n.payloads[t]=i,void(n.modules[t]=null))},o=function(t,e,i){if("[object Array]"===Object.prototype.toString.call(e)){for(var n=[],r=0,s=e.length;s>r;++r){var u=a(t,e[r]);if(!u&&o.original)return o.original.apply(window,arguments);n.push(u)}i&&i.apply(null,n)}else{if("string"==typeof e){var c=a(t,e);return!c&&o.original?o.original.apply(window,arguments):(i&&i(),c)}if(o.original)return o.original.apply(window,arguments)}},r=function(t,e){if("."==e.charAt(0)){for(var i,n=t.split("/"),o=(n.pop(),e.split("/"));i=o.shift();)".."==i?n.pop():"."!=i&&n.push(i);return n.join("/")}return e},s=function(t,e){if(-1!==e.indexOf("!")){var i=e.split("!");return s(t,i[0])+"!"+s(t,i[1])}return name=r(t,e),name},a=function(t,e){e=s(t,e);var r=n.modules[e];if(!r){if(r=n.payloads[e],"function"==typeof r){var u={},c={id:e,uri:"",exports:u,packaged:!0},l=function(t,i){return o(e,t,i)},h=r(l,u,c,i);u=h||c.exports,n.modules[e]=u,delete n.payloads[e]}r=u||r,r||-1!=e.indexOf("/index")||(r=n.modules[e]=a(t,e+"/index"))}return r||console.log("unload error",t,e),n.modules[e]=r,r};t(e)}}(),latte.global=this,this.define=latte.define,latte.config={},function(){this.config={}}.call(latte),function(t){"use strict";t("latte_lib/async",["require","exports","module","window"],function(t,e,i,n){var o=t("./lib");o||console.log("no load lib"),function(){var t=this;this.setImmediate=o.setImmediate;var e=this.only_once=function(e){var i=!1;return function(){if(i)throw new Error("Callback was already called.");i=!0,e.apply(t,arguments)}};this.forEach=this.each=function(t,i,n){function r(e){e?(n(e),n=function(){}):(s+=1,s>=t.length&&n())}if(n=n||function(){},!t.length)return n();var s=0;o.forEach(t,function(t){i(t,e(r))})},this.forEachSeries=this.eachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var n=0;!function o(){e(t[n],function(e){e?(i(e),i=function(){}):(n+=1,n>=t.length?i():o())})}()},this.forEachLimit=this.eachLimit=function(t,e,n,o){var r=i(e);r.apply(null,[t,n,o])};var i=function(t){return function(e,i,n){if(n=n||function(){},!e.length||0>=t)return n();var o=0,r=0,s=0;!function a(){if(o>=e.length)return n();for(;t>s&&r<e.length;)r+=1,s+=1,i(e[r-1],function(t){t?(n(t),n=function(){}):(o+=1,s-=1,o>=e.length?n():a())})}()}},n=function(e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[t.each].concat(i))}},r=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[i(t)].concat(n))}},s=function(e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[t.eachSeries].concat(i))}},a=function(t,e,i,n){if(e=o.map(e,function(t,e){return{index:e,value:t}}),n){var r=[];t(e,function(t,e){i(t.value,function(i,n){r[t.index]=n,e(i)})},function(t){n(t,r)})}else t(e,function(t,e){i(t.value,function(t){e(t)})})};this.map=n(a),this.mapSeries=s(a);var u=function(t){return r(t,a)};this.mapLimit=function(t,e,i,n){return u(e)(t,i,n)},this.inject=this.foldl=this.reduce=function(e,i,n,o){t.eachSeries(e,function(t,e){n(i,t,function(t,n){i=n,e(t)})},function(t){o(t,i)})},this.foldr=this.reduceRight=function(e,i,n,r){var s=o.map(e,function(t){return t}).reverse();t.reduce(s,i,n,r)};var c=function(t,e,i,n){var r=[];e=o.map(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i&&r.push(t),e()})},function(t){n(o.map(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};this.select=this.filter=n(c),this.selectSeries=this.filterSeries=s(c);var l=function(t,e,i,n){var r=[];e=o.map(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i||r.push(t),e()})},function(t){n(o.map(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};this.reject=n(l),this.rejectSeries=s(l);var h=function(t,e,i,n){t(e,function(t,e){i(t,function(i){i?(n(t),n=function(){}):e()})},function(t){n()})};this.detect=n(h),this.detectSeries=s(h),this.any=this.some=function(e,i,n){t.each(e,function(t,e){i(t,function(t){t&&(n(!0),n=function(){}),e()})},function(t){n(!1)})},this.all=this.every=function(e,i,n){t.each(e,function(t,e){i(t,function(t){t||(n(!1),n=function(){}),e()})},function(t){n(!0)})},this.sortBy=function(e,i,n){t.map(e,function(t,e){i(t,function(i,n){i?e(i):e(null,{value:t,criteria:n})})},function(t,e){if(t)return n(t);var i=function(t,e){var i=t.criteria,n=e.criteria;return n>i?-1:i>n?1:0};n(null,o.map(e.sort(i),function(t){return t.value}))})},this.auto=function(t,e){e=e||function(){};var i=o.keys(t),n=i.length;if(!n)return e();var r={},s=[],a=function(t){s.unshift(t)},u=function(t){for(var e=0;e<s.length;e+=1)if(s[e]===t)return void s.splice(e,1)},c=function(){n--,o.forEach(s.slice(0),function(t){t()})};a(function(){if(!n){var t=e;e=function(){},t(null,r)}}),o.forEach(i,function(i){var n=o.isArray(t[i])?t[i]:[t[i]],s=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var s={};o.forEach(o.keys(r),function(t){s[t]=r[t]}),s[i]=n,e(t,s),e=function(){}}else r[i]=n,o.setImmediate(c)},l=n.slice(0,Math.abs(n.length-1))||[],h=function(){return o.reduce(l,function(t,e){return t&&r.hasOwnProperty(e)},!0)&&!r.hasOwnProperty(i)};if(h())n[n.length-1](s,r);else{var f=function(){h()&&(u(f),n[n.length-1](s,r))};a(f)}})},this.retry=function(e,i,n){var o=5,r=[];"function"==typeof e&&(n=i,i=e,e=o),e=parseInt(e,10)||o;var s=function(o,s){for(var a=function(t,e){return function(i){t(function(t,n){i(!t||e,{err:t,result:n})},s)}};e;)r.push(a(i,!(e-=1)));t.series(r,function(t,e){e=e[e.length-1],(o||n)(e.err,e.result)})};return n?s():s},this.waterfall=function(e,i){if(i=i||function(){},!o.isArray(e)){var n=new Error("First argument to waterfall must be an array of functions");return i(n)}if(!e.length)return i();var r=function(t){return function(e){if(e)i.apply(null,arguments),i=function(){};else{var n=Array.prototype.slice.call(arguments,1),s=t.next();s?n.push(r(s)):n.push(i),o.setImmediate(function(){t.apply(null,n)})}}};r(t.iterator(e))()};var f=function(t,e,i){if(i=i||function(){},o.isArray(e))t.map(e,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)})},i);else{var n={};t.each(o.keys(e),function(t,i){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[t]=o,i(e)})},function(t){i(t,n)})}};this.parallel=function(e,i){f({map:t.map,each:t.each},e,i)},this.parallelLimit=function(t,e,n){f({map:u(e),each:i(e)},t,n)},this.series=function(e,i){if(i=i||function(){},o.isArray(e))t.mapSeries(e,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)})},i);else{var n={};t.eachSeries(_keys(e),function(t,i){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[t]=o,i(e)})},function(t){i(t,n)})}},this.iterator=function(t){var e=function(i){var n=function(){return t.length&&t[i].apply(null,arguments),n.next()};return n.next=function(){return i<t.length-1?e(i+1):null},n};return e(0)},this.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var d=function(t,e,i,n){var o=[];t(e,function(t,e){i(t,function(t,i){o=o.concat(i||[]),e(t)})},function(t){n(t,o)})};this.concat=n(d),this.concatSeries=s(d),this.whilst=function(e,i,n){e()?i(function(o){return o?n(o):void t.whilst(e,i,n)}):n()},this.doWhilst=function(e,i,n){e(function(o){if(o)return n(o);var r=Array.prototype.slice.call(arguments,1);i.apply(null,r)?t.doWhilst(e,i,n):n()})},this.until=function(e,i,n){e()?n():i(function(o){return o?n(o):void t.until(e,i,n)})},this.doUntil=function(e,i,n){e(function(o){if(o)return n(o);var r=Array.prototype.slice.call(arguments,1);i.apply(null,r)?n():t.doUntil(e,i,n)})},this.queue=function(t,i){function n(t,e,i,n){return t.started||(t.started=!0),_isArray(e)||(e=[e]),0==e.length?o.setImmediate(function(){t.drain&&t.drain()}):void o.forEach(e,function(e){var r={data:e,callback:"function"==typeof n?n:null};i?t.tasks.unshift(r):t.tasks.push(r),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}void 0===i&&(i=1);var r=0,s={tasks:[],concurrency:i,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){n(s,t,!1,e)},kill:function(){s.drain=null,s.tasks=[]},unshift:function(t,e){n(s,t,!0,e)},process:function(){if(!s.paused&&r<s.concurrency&&s.tasks.length){var i=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),r+=1;var n=function(){r-=1,i.callback&&i.callback.apply(i,arguments),s.drain&&s.tasks.length+r===0&&s.drain(),s.process()},o=e(n);t(i.data,o)}},length:function(){return s.tasks.length},running:function(){return r},idle:function(){return s.tasks.length+r===0},pause:function(){s.paused!==!0&&(s.paused=!0,s.process())},resume:function(){s.paused!==!1&&(s.paused=!1,s.process())}};return s},this.priorityQueue=function(e,i){function n(t,e){return t.priority-e.priority}function r(t,e,i){for(var n=-1,o=t.length-1;o>n;){var r=n+(o-n+1>>>1);i(e,t[r])>=0?n=r:o=r-1}return n}function s(t,e,i,s){return t.started||(t.started=!0),_isArray(e)||(e=[e]),0==e.length?o.setImmediate(function(){t.drain&&t.drain()}):void o.forEach(e,function(e){var a={data:e,priority:i,callback:"function"==typeof s?s:null};t.tasks.splice(r(t.tasks,a,n)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}var a=t.queue(e,i);return a.push=function(t,e,i){s(a,t,e,i)},delete a.unshift,a},this.cargo=function(t,e){var i=!1,n=[],r={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,i){o.isArray(t)||(t=[t]),o.forEach(t,function(t){n.push({data:t,callback:"function"==typeof i?i:null}),r.drained=!1,r.saturated&&n.length===e&&r.saturated()}),o.setImmediate(r.process)},process:function s(){if(!i){if(0===n.length)return r.drain&&!r.drained&&r.drain(),void(r.drained=!0);var a="number"==typeof e?n.splice(0,e):n.splice(0,n.length),u=o.map(a,function(t){return t.data});r.empty&&r.empty(),i=!0,t(u,function(){i=!1;var t=arguments;o.forEach(a,function(e){e.callback&&e.callback.apply(null,t)}),s()})}},length:function(){return n.length},running:function(){return i}};return r};var m=function(t){return function(e){var i=Array.prototype.slice.call(arguments,1);e.apply(null,i.concat([function(e){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&o.forEach(i,function(e){console[t](e)}))}]))}};this.log=m("log"),this.dir=m("dir"),this.memoize=function(t,e){var i={},n={};e=e||function(t){return t};var r=function(){var r=Array.prototype.slice.call(arguments),s=r.pop(),a=e.apply(null,r);a in i?o.nextTick(function(){s.apply(null,i[a])}):a in n?n[a].push(s):(n[a]=[s],t.apply(null,r.concat([function(){i[a]=arguments;var t=n[a];delete n[a];for(var e=0,o=t.length;o>e;e++)t[e].apply(null,arguments)}])))};return r.memo=i,r.unmemoized=t,r},this.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},this.times=function(e,i,n){for(var o=[],r=0;e>r;r++)o.push(r);return t.map(o,i,n)},this.timesSeries=function(e,i,n){for(var o=[],r=0;e>r;r++)o.push(r);return t.mapSeries(o,i,n)},this.seq=function(){var e=arguments;return function(){var i=this,n=Array.prototype.slice.call(arguments),o=n.pop();t.reduce(e,n,function(t,e,n){e.apply(i,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,e){o.apply(i,[t].concat(e))})}},this.compose=function(){return t.seq.apply(null,Array.prototype.reverse.call(arguments))};var p=function(t,e){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),o=n.pop();return t(e,function(t,e){t.apply(i,n.concat([e]))},o)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return i.apply(this,n)}return i};this.applyEach=n(p),this.applyEachSeries=s(p),this.forever=function(t,e){function i(n){if(n){if(e)return e(n);throw n}t(i)}i()}}.call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/coding/base64",["require","exports","module","window"],function(t,e,i,n){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(i){var n,o,r,s,a,u,c,l="",h=0;for(i=t("./utf8").encode(i);h<i.length;)n=i.charCodeAt(h++),o=i.charCodeAt(h++),r=i.charCodeAt(h++),s=n>>2,a=(3&n)<<4|o>>4,u=(15&o)<<2|r>>6,c=63&r,isNaN(o)?u=c=64:isNaN(r)&&(c=64),l=l+e.charAt(s)+e.charAt(a)+e.charAt(u)+e.charAt(c);return l},this.decode=function(i){var n,o,r,s,a,u,c,l="",h=0;for(i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<i.length;)s=e.indexOf(i.charAt(h++)),a=e.indexOf(i.charAt(h++)),u=e.indexOf(i.charAt(h++)),c=e.indexOf(i.charAt(h++)),n=s<<2|a>>4,o=(15&a)<<4|u>>2,r=(3&u)<<6|c,l+=String.fromCharCode(n),64!=u&&(l+=String.fromCharCode(o)),64!=c&&(l+=String.fromCharCode(r));return l=t("./utf8").decode(l)}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/coding/hex",["require","exports","module","window"],function(t,e,i,n){(function(){this.encode=function(t){for(var e="0123456789ABCDEF",i=16,n=t.length,o="",r=0;n>r;r++){var s=parseInt(t.charCodeAt(r),10);o+="%"+Math.floor(s/i)+e.charAt(s%i)}return o},this.decode=function(t){for(var e=t.split("%"),i="",n=1;e[n];n++)i+=String.fromCharCode(parseInt(e[n],16));return i}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/coding/utf8",["require","exports","module","window"],function(t,e,i,n){(function(){function t(t,e){return a(t>>e&63|128)}function e(e){if(0==(4294967168&e))return a(e);var i="";return 0==(4294965248&e)?i=a(e>>6&31|192):0==(4294901760&e)?(i=a(e>>12&15|224),i+=t(e,6)):0==(4292870144&e)&&(i=a(e>>18&7|240),i+=t(e,12),i+=t(e,6)),i+=a(63&e|128)}function i(){if(s>=r)throw Error("Invalid byte index");var t=255&o[s];if(s++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function n(){var t,e,n,a,u;if(s>r)throw Error("Invalid byte index");if(s==r)return!1;if(t=255&o[s],s++,0==(128&t))return t;if(192==(224&t)){var e=i();if(u=(31&t)<<6|e,u>=128)return u;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=i(),n=i(),u=(15&t)<<12|e<<6|n,u>=2048)return u;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=i(),n=i(),a=i(),u=(15&t)<<18|e<<12|n<<6|a,u>=65536&&1114111>=u))return u;throw Error("Invalid UTF-8 detected")}this.version="0.0.1";var o,r,s,a=String.fromCharCode,u=this.ucs2encode=function(t){for(var e,i=t.length,n=-1,o="";++n<i;)e=t[n],e>65535&&(e-=65536,o+=a(e>>>10&1023|55296),e=56320|1023&e),o+=a(e);return o},c=this.ucs2decode=function(t){for(var e,i,n=[],o=0,r=t.length;r>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&r>o?(i=t.charCodeAt(o++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--)):n.push(e);return n};this.encode=function(t){for(var i,n=c(t),o=n.length,r=-1,s="";++r<o;)i=n[r],s+=e(i);return s},this.decode=function(t){o=c(t),r=o.length,s=0;for(var e,i=[];(e=n())!==!1;)i.push(e);return u(i)}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/debug",["require","exports","module","window"],function(t,e,i,n){var o=function(t){var e=t.toString().split("\n")[2],i=e.substring(e.indexOf("(")+1,e.indexOf(")"));return i},r=n?!n.debug:-1==process.argv.indexOf("-debug"),s={};["log","info","error","warn"].forEach(function(t){s[t]=function(){if(!r){var e=new Error("debug");console[t].apply(console[t],[o(e.stack)].concat(Array.prototype.slice.call(arguments)))}}}),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/events",["require","exports","module","window"],function(t,e,i,n){var o;if(n){var o=function(){this._events=this._events||{}};(o["interface"]=function(){this.on=this.addEventListener=function(t,e){return this._events=this._events||{},(this._events[t]=this._events[t]||[]).push(e),this},this.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._events=this._events||{},i.fn=e,this.on(t,i),this},this.off=this.removeListener=this.removeAllListeners=this.removeEventListener=function(t,e){if(this._events=this._events||{},0==arguments.length)return this._events={},this;var i=this._events[t];if(!i)return this;if(1==arguments.length)return delete this._events[t],this;for(var n,o=0;o<i.length;o++)if(n=i[o],n===e||n.fn===e){i.splice(o,1);break}return this},this.emit=function(t){this._events=this._events||{};var e=[].slice.call(arguments,1),i=this._events[t];if(i){i=i.slice(0);for(var n=0,o=i.length;o>n;++n)i[n].apply(this,e)}return this},this.listeners=function(t){return this._events=this._events||{},this._events[t]||[]},this.hasListeners=function(t){return!!this.listeners(t).length}}).call(o.prototype)}else o=t("events").EventEmitter;i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/format",["require","exports","module","window"],function(t,e,i,n){var o=t("./lib");(function(){function t(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function i(e){return t(e,2)}function n(t){var e=Math.abs(t.getTimezoneOffset()),i=String(Math.floor(e/60)),n=String(e%60);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),t.getTimezoneOffset()<0?"+"+i+n:"-"+i+n}var r=this;this.ISO8601_FORMAT="yyyy-MM-dd hh:mm:ss.SSS",this.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ssO",this.DATETIME_FORMAT="hh:mm:ss.SSS",this.getDateReplace=function(e,o,r){o=o||"",r=r||"";var s=i(e.getDate()),a=i(e.getMonth()+1),u=i(e.getFullYear()),c=i(e.getFullYear().toString().substring(2,4)),l=i(e.getHours()),h=i(e.getMinutes()),f=i(e.getSeconds()),d=t(e.getMilliseconds(),3),m=n(e),p={};return p[o+"dd"+r]=s,p[o+"MM"+r]=a,p[o+"yyyy"+r]=u,p[o+"y{1,4}"+r]=c,p[o+"hh"+r]=l,p[o+"mm"+r]=h,p[o+"ss"+r]=f,p[o+"SSS"+r]=d,p[o+"O"+r]=m,p},this.dateFormat=function(t,i){i||(i=t||new Date,t=e.ISO8601_FORMAT);var n=t,s=r.getDateReplace(i);return o.jsonForEach(s,function(t,e){n=n.replace(new RegExp(t,"g"),e)}),n};var s=function(t,e){var i=[];if(e>0)for(var n=0;e>n;n++)i.push(t);return i.join("")},a=function(t,e,i,n){var r=n?s(i.t,e-1):"";if(null===t||void 0===t)return r+"null";switch(o.getClassName(t)){case"array":for(var u=s(i.t,e-1),c=[i.n+u+"["+i.n],l=[],h=0,f=t.length;f>h;h++)l.push(a(t[h],e+1,i,!0));return c.push(l.join(","+i.n)),c.push(i.n+u+"] "),c.join("");case"object":var d=[];for(var m in t)if(void 0!=t[m]){var c=[],u=s(i.t,e);c.push(u),c.push('"'+m+'" : ');var p=t[m];c.push(a(p,e+1,i)),d.push(c.join(""))}return(e>1&&!n?i.n:"")+s(i.t,e-1)+"{"+i.n+d.join(","+i.n)+i.n+s(i.t,e-1)+"}";case"number":return r+t.toString();case"boolean":return r+t.toString().toLowerCase();case"function":return"[Function]";default:return r+('"'+t.toString()+'"')}},u={n:"\n",t:"	"};this.jsonFormat=function(t,e){e=o.merger(u,e);try{return a(t,1,e)}catch(i){throw t}},this.templateStringFormat=function(t,e){var i=t;for(var n in e)i=i.replace(new RegExp("{{"+n+"}}","igm"),e[n]);return i},this.templateJsonFormat=function(t,e){var t=JSON.stringify(t),i=r.templateStringFormat(t,e);return JSON.parse(i)}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/index",["require","exports","module","window"],function(t,e,i,n){i.exports=t("./lib"),function(){n||(this.fs=t("./old/fs")),this.utf8=t("./coding/utf8"),this.async=t("./async"),this.events=t("./events"),this.format=t("./format"),this.removeIdle=t("./old/removeIdle"),this.queue=t("./old/queue"),this.base64=t("./coding/base64"),this.debug=t("./debug"),this.xhr=t("./old/xhr")}.call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/lib",["require","exports","module","window"],function(t,e,i,n){(function(){var e=this;this.setImmediate=this.nextTick=function(){return"undefined"!=typeof process&&process.nextTick?process.nextTick:n&&"function"==typeof n.setImmediate?n.setImmediate:function(t){setTimeout(t,0)}}(),this.inherits=function(t,e){if("function"==typeof Object.create)t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},this.forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0,n=t.length;n>i;i++)e(t[i],i,t)},this.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},this.copyArray=function(t){return t.concat([])},this.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},this.removeArray=function(t,i,n){var o=e.copyArray(t);return e.removeLocalArray(o,i,n),o},this.removeLocalArray=function(t,e,i){return i=i||e,t.splice(e,i-e+1),t},this.inserLocalArray=function(t,e,i){return t.splice(e,0,i),t},this.copy=function(t){return JSON.parse(JSON.stringify(t))},this.clone=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},this.reduce=function(t,i,n){return t.reduce?t.reduce(i,n):(e.forEach(t,function(t,e,o){n=i(n,t,e,o)}),n)},this.map=function(t,i){if(t.map)return t.map(i);var n=[];return e.forEach(t,function(t,e,o){n.push(i(t,e,o))}),n},this.jsonForEach=function(t,e){this.keys(t).forEach(function(i){e(i,t[i])})},this.getChar=function(t,e){var i=t.split("");return i[e]},Function.prototype.bind||(Function.prototype.bind=function(t){var e=Array.prototype.slice.call(arguments,1),i=this;return function(){i.apply(t,e.concat(Array.prototype.slice.call(arguments)))}}),this.isArray=function(t){if(Array.isArray)return Array.isArray(t);throw"no handle isArray"},this.isDate=function(t){return t.constructor==Date},["String","Function","Boolean","Number"].forEach(function(t){e["is"+t]=function(e){return typeof e==t.toLowerCase()}}),this.getClassName=function(t){for(var i=["Array","String","Number","Date","Boolean","Function"],n=0,o=i.length;o>n;n++)if(e["is"+i[n]](t))return i[n].toLowerCase();return"object"},this.merger=function(t){var t=e.clone(t);return Array.prototype.slice.call(arguments,1).forEach(function(e){e&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},this.getErrorString=function(e){if(e.stack)return e.stack.toString();if(latte_lib.isString(e))return e.toString();var i;try{i=JSON.stringify(e)}catch(n){var o=t("util");i=o.inspect(e)}return i}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/old/blobBuilder",["require","exports","module","window"],function(t,e,i,n){var o=n;o.URL=o.URL||o.webkitURL;var r=o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},n=function(t,e,i){this.data=t,this.size=t.length,this.type=e,this.encoding=i},o=i.prototype,r=n.prototype,s=t.FileReaderSync,a=function(t){this.code=this[this.name=t]},u="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=u.length,l=t.URL||t.webkitURL||t,h=l.createObjectURL,f=l.revokeObjectURL,d=l,m=t.btoa,p=t.atob,y=t.ArrayBuffer,_=t.Uint8Array,x=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=r.fake=!0;c--;)a.prototype[u[c]]=c+1;return l.createObjectURL||(d=t.URL=function(t){var e,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=t,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(e=t.match(x),i.origin=e&&e[1])),i}),d.createObjectURL=function(t){var e,i=t.type;return null===i&&(i="application/octet-stream"),t instanceof n?(e="data:"+i,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):m?e+";base64,"+m(t.data):e+","+encodeURIComponent(t.data)):h?h.call(l,t):void 0},d.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(l,t)},o.append=function(t){var i=this.data;if(_&&(t instanceof y||t instanceof _)){for(var o="",r=new _(t),u=0,c=r.length;c>u;u++)o+=String.fromCharCode(r[u]);i.push(o)}else if("Blob"===e(t)||"File"===e(t)){if(!s)throw new a("NOT_READABLE_ERR");var l=new s;i.push(l.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&p?i.push(p(t.data)):"URI"===t.encoding?i.push(decodeURIComponent(t.data)):"raw"===t.encoding&&i.push(t.data):("string"!=typeof t&&(t+=""),i.push(unescape(encodeURIComponent(t))))},o.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},o.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,i){var o=arguments.length;return 3>o&&(i=null),new n(this.data.slice(t,o>1?e:this.data.length),i,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},i}(o);o.Blob=function(t,e){var i=e?e.type||"":"",n=new r;if(t)for(var o=0,s=t.length;s>o;o++)n.append(t[o]);return n.getBlob(i)},i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/old/buffer",["require","exports","module","window"],function(t,e,i,n){if(n){var o=t("../coding/utf8"),r=function(){function t(t,e,i){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function e(t,e,i,n,o,r){if(e%1!==0||e>o||r>e)throw TypeError("value is out of bounds");if(i%1!==0||0>i)throw TypeError("offset is not uint");if(i+n>t.length||t.length+i<0)throw RangeError("Trying to write outside buffer length")}this.slice=function(t,e){var i=Array.prototype.slice.call(this,t,e);return new s(i)},this.readInt32LE=function(e,i){return i||t(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},this.readInt16LE=function(e,i){i||t(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},this.writeInt32LE=function(t,i,n){n||e(this,t,i,4,2147483647,-2147483648),this[i]=t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24},this.writeInt16LE=function(t,i,n){n||e(this,t,i,2,32767,-32768),this[i]=t,this[i+1]=t>>>8},this.copy=function(t,e,i,n){for(var i=i||0,n=n||this.length,o=0,r=n-i;r>=o;o++)t[e+o]=this[i+o]},this.toString=function(t,e,i){switch(t){default:var n=o.ucs2encode(this);return n}}},s=function(t){var t=new Uint8Array(t);return r.call(t),t};(function(){this.create=function(t){if("string"==typeof t){var t=o.ucs2decode(t),e=new s(t.length);return t.forEach(function(t,i){e[i]=t}),e}}}).call(s),i.exports=s}else i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/old/fs",["require","exports","module","window"],function(t,e,i,n){var o=t("fs"),r=t("path");(function(){var t=this;for(var e in o)t[e]=o[e];this.exists=function(t,e){return o.exists(t,e)},this.existsSync=function(t){return o.existsSync(t)},this.mkdirSync=function(e,i){if(t.existsSync(e))return null;if(!t.existsSync(r.dirname(e))){var n=t.mkdirSync(r.dirname(e),i);if(n)return n}return o.mkdirSync(e,i)},this.writeFileSync=function(e,i){var n=t.mkdirSync(r.dirname(e));return n?n:o.writeFileSync(e,i,{encoding:"utf8"})},this.writeFile=function(e,i,n){t.mkdir(r.dirname(e),null,function(){o.writeFile(e,i,{encoding:"utf8"},n)})},this.readFile=function(t,e){return o.readFile(t,function(t,i){e(t,i?i.toString():null)})},this.readFileSync=function(t){return o.readFileSync(t).toString()},this.mkdir=function(e,i,n){t.exists(e,function(s){s?n(null,e):t.mkdir(r.dirname(e),i,function(t){return t?n(t):void o.mkdir(e,i,n)})})},this.copyFile=function(e,i,n){try{var s=o.createReadStream(e);t.mkdir(r.dirname(i),null,function(t){var e=o.createWriteStream(i);s.pipe(e),n(null)})}catch(a){n(a)}},this.copyDir=function(t,e,i){},this.fileType=function(t){return r.extname(t).substring(1)},this.lstatSync=function(t){return o.lstatSync(t)},this.readdirSync=function(t){return o.readdirSync(t)},this.realpathSync=function(t,e){return o.realpathSync(t,e)},this.appendFile=function(t,e,i,n){return o.appendFile(t,e,i,n)},this.appendFileSync=function(t,e,i){return o.appendFile(t,e,i)},this.deleteFile=function(t,e){o.unlink(t,e)},this.deleteFileSync=function(t){return o.unlinkSync(t)},this.stat=function(t,e){return o.stat(t,e)},this.createReadStream=function(t,e){return o.createReadStream(t,e)},this.createWriteStream=function(t,e){return o.createWriteStream(t,e)},this.rename=function(t,e,i){return o.rename(t,namePath,i)},this.watch=function(t,e,i){return o.watch(t,e,i)},this.statSync=function(t){return o.statSync(t)},this.WriteStream=o.WriteStream}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/old/promise",["require","exports","module","window"],function(t,e,i,n){(function(){this.defer=function(){var t,e=[];return{resolve:function(i){if(e){t=ref(i);for(var n=0,o=e.length;o>n;n++)enqueue(function(){t.then.apply(t,e[n])});e=void 0}},promise:{then:function(i,n){var o=defer();i=i||function(t){return t},n=n||function(t){return reject(t)};var r=function(t){o.resolve(i(t))},s=function(t){o.resolve(n(t))};return e?e.push([r,s]):enqueue(function(){t.then(r,s)}),o.promise}}}},this.ref=function(t){return t&&t.then?t:{then:function(e){var i=defer();return enqueue(function(){i.resolve(e(t))}),i.promise}}},this.reject=function(t){return{then:function(e,i){var n=defer();return enqueue(function(){n.resolve(i(t))}),n.promise}}},this.when=function(t,e,i){var n,o=defer();e=e||function(t){return t},i=i||function(t){return reject(t)};var r=function(t){try{return e(t)}catch(i){return reject(i)}},s=function(t){try{return i(t)}catch(t){return reject(t)}};return enqueue(function(){ref(t).then(function(t){n||(n=!0,o.resolve(ref(t).then(r,s)))},function(t){n||(n=!0,o.resolve(s(t)))})}),o.promise}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/old/queue",["require","exports","module","window"],function(t,e,i,n){function o(t){this._size=Math.max(0|+t,1),this.slots=[];for(var e=0;e<this._size;e++)this.slots.push([])}(function(){this.size=function(){if(null==this.total){this.total=0;for(var t=0;t<this._size;t++)this.total+=this.slots[t].length}return this.total},this.enqueue=function(t,e){var i;e=e&&0|+e||0,this.total=null,e&&(i=e,(0>e||e>=this._size)&&(e=this._size-1)),this.slots[e].push(t)},this.dequeue=function(){var t=null,e=this.slots.length;this.total=null;for(var i=0;e>i;i++)if(this.slots[i].length>0){t=this.slots[i].shift();break}return t}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/old/reconnection",["require","exports","module","window"],function(t,e,i,n){function o(t){this.attempts=0,this.reconnecting=t.reconnecting||!1,this.openReconnect=!0,this.readyState="close",this.reconnectionDelay=t.reconnectionDelay||2e3,this.reconnectionDelayMax=t.reconnectionDelayMax||6e4}t("../lib");(function(){this.maybeReconnectOnOpen=function(){!this.reconnecting&&-1!=this.readyState.indexOf("close")&&this.openReconnect&&this.reconnect();
},this.cleanup=function(){},this.onReconnect=function(){this.attempts;this.attempts=0,this.reconnecting=!1},this.reconnect=function(){if(this.reconnecting)return this;if(!this.openReconnect)return this;var t=this;if(this.attemptsMax&&++this.attempts>this.attemptsMax)this.reconnecting=!1,console.log("reconnecting_fail full");else{var e=this.attempts*this.reconnectionDelay;e=Math.min(e,this.reconnectionDelayMax),this.reconnecting=!0;setTimeout(function(){t.open(function(e){e?(t.reconnecting=!1,t.reconnect()):t.onReconnect()})},e)}},this.onClose=function(t){this.cleanup(),this.readyState="closed",this.openReconnect&&this.reconnect()}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_lib/old/removeIdle",["require","exports","module","window"],function(t,e,i,n){function o(t){this.reapIntervalMillis=t.reapIntervalMillis||1e3,this.idleTimeoutMillis=t.idleTimeoutMillis||1e4,this.refreshIdle=t.refreshIdle||!0,this.returnToHead=t.returnToHead||!1,this.scheduleRemoveIdle(),this.min=t.min||0,this.max=t.max||1e3,this.availableObjects=[],this._destroy=t.destroy||function(){},this._create=t.create,this.log=t.log||null}(function(){this.removeConditions=function(){return!0},this.ensureMinimum=function(){},this.dispense=function(){},this.getIdle=function(t){this.availableObjects=this.availableObjects.filter(function(e){return e.obj!==t})},this.size=function(){return this.availableObjects.length},this.update=function(t){for(var e=0,i=this.availableObjects.length;i>e&&this.removeConditions();e++)t==this.availableObjects[e].obj&&(this.availableObjects[e].timeout=(new Date).getTime()+this.idleTimeoutMillis)},this.release=function(t){if(this.availableObjects.some(function(e){return e.obj===t?(e.timeout=(new Date).getTime()+this.idleTimeoutMillis,!0):void 0}))return void(this.log&&this.log.error("called twice for the same resource"));var e={obj:t,timeout:(new Date).getTime()+this.idleTimeoutMillis};this.returnToHead?this.availableObjects.splice(0,0,e):this.availableObjects.push(e),this.dispense(),this.scheduleRemoveIdle()},this.removeIdle=function(){var t=[],e=(new Date).getTime(),i=this;this.removeIdleScheduled=!1;for(var n=0,o=this.availableObjects.length;o>n&&this.removeConditions();n++){var r=this.availableObjects[n].timeout;e>r&&t.push(this.availableObjects[n].obj)}for(var n=0,o=t.length;o>n;n++)i.destroy(t[n]);this.availableObjects.length>0&&this.scheduleRemoveIdle()},this.scheduleRemoveIdle=function(){this.removeIdleScheduled||(this.removeIdleScheduled=!0,this.removeIdleTimer=setTimeout(this.removeIdle.bind(this),this.reapIntervalMillis))},this.destroy=function(t){this.getIdle(t),this._destroy(t),this.ensureMinimum()},this.destroyAllNow=function(t){var e=this.availableObjects;this.availableObjects=[];for(var i=e.shift(),n=this;null!==i&&void 0!==i;)n.destroy(i.obj),i=e.shift();this.removeIdleScheduled=!1,clearTimeout(this.removeIdleTimer),t&&t()}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){t("latte_lib/old/xhr",["require","exports","module","window"],function(t,e,i,n){var o,r,s=t("../lib"),a=t("../events"),u=function(){},c={};if(n)r=n.XMLHttpRequest,o=function(t){this.method=t.method||"GET",this.uri=t.uri,this.data=t.data,this.async=0!=t.async,this.xd=!!t.xd,this.xs=!!t.xs,this.agent=t.agent,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.headers=s.merger(c,t.headers),this.create()},s.inherits(o,a),function(){this.create=function(){var t=this.xhr=new r({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized}),e=this;try{t.open(this.method,this.uri,this.async),"withCredentials"in t&&(t.withCredentials=!0);try{if(this.headers)for(var i in this.headers)this.headers.hasOwnProperty(i)&&t.setRequestHeader(i,this.headers[i])}catch(n){console.log("setHeader error",n)}this.hasXDR()?(t.onload=function(){e.onLoad()},t.onerror=function(){e.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?e.onLoad():s.nextTick(function(){e.onError(t.status)}))},t.send(this.data)}catch(n){return s.nextTick(function(){e.onError(n)})}o.requests&&(this.index=o.requests.requestsCount++,o.requests[this.index]=this)},this.onSuccess=function(){this.emit("success"),this.cleanup()},this.onData=function(t){this.emit("data",t),this.onSuccess()},this.onError=function(t){this.emit("error",t),this.cleanup(!0)},this.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(e){}o.requests&&delete o.requests[this.index],this.xhr=null}},this.onLoad=function(){var e;try{var i;try{i=this.xhr.getResponseHeader("Content-Type")}catch(n){}if("application/octet-stream"==i)e=this.xhr.response;else if(this.supportsBinary){var o=t("./buffer");e=String.fromCharCode.apply(null,new o(this.xhr.response))}else e=this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},this.hasXDR=function(){return(!n||"undefined"!=typeof n.XDomainRequest)&&!this.xs&&this.enablesXDR},this.abort=function(){this.cleanup()},n.attachEvent?n.attachEvent("onunload",o.unloadHandler):n.addEventListener("beforeunload",o.unloadHandler,!1)}.call(o.prototype);else{var l=t("url"),o=function(t){this.uri=t.uri,this.method=t.method||"GET",this.data=t.data,this.encoding=t.encoding||"utf8",this.headers=s.merger(c,t.headers),this.create()};s.inherits(o,a),function(){this.create=function(){var e=this,i=l.parse(this.uri);i.method=this.method;var n=i.protocol.substring(0,i.protocol.length-1),r=t(n),s=t("domain"),a=s.create();a.on("error",function(t){e.onError(t)}),a.run(function(){var t=this.req=r.request(i,function(t){if(200!=t.statusCode)return e.onError(t.statusCode);e.emit("headers",t.headers),t.setEncoding(e.encoding);var i="";t.on("data",function(t){e.emit("chunk",t),i+=t.toString()}),t.on("end",function(){e.onData(i,t.headers)})});t.on("error",function(t){e.onError(t)}),t.end(this.data),o.requests&&(this.index=o.requests.requestsCount++,o.requests[this.index]=this)})},this.onError=function(t){this.emit("error",t),this.cleanup(!0)},this.onData=function(t,e){this.emit("data",t,e),this.cleanup(!1)},this.cleanup=function(t){if("undefined"!=typeof this.req&&null!=this.req){if(this.onData=this.onError=u,t)try{this.req.abort()}catch(e){}o.requests&&delete o.requests[this.index],this.req=null}}}.call(o.prototype)}(function(){this.requests={},this.requestsCount=0;var t=this;this.unloadHandler=function(){for(var e in t.requests)t.requests.hasOwnProperty(e)&&t.requests[e].abort()};var e=function(t){return encodeURIComponent(t)},i=function(t){switch(console.log(t),typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";case"object":return JSON.stringify(t);default:return""}},n=this.urlencode=function(t,n,o){return n=n||"&",o=o||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(n){var r=e(i(n))+o;return Array.isArray(t[n])?r+e(JSON.stringify(t[n])):r+e(i(t[n]))}).join(n):void 0};this.urldecode=function(t){for(var e={},i=t.split("&"),n=0,o=i.length;o>n;n++){var r=i[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e};this.get=function(t,e,i,r,a){s.isFunction(i)&&(a=r,r=i,i={}),i.method="GET",i.uri=t+"?"+n(e);var u=new o(i);return r&&u.on("data",r),a&&u.on("error",a),u};var r=function(t){return t["Content-type"]?t["Content-type"].match(/octet-stream/i)?"octet-stream":t["Content-type"].match(/urlencoded/i)?"urlencoded":t["Content-type"].match(/json/i)?"json":t["Content-type"].match(/text/i)?"text":void 0:"text"},a=function(t,e){switch(r(e)){case"urlencoded":return n(t);case"json":return JSON.stringify(t);case"octet-stream":if(s.isString(t))return t;var i=Object.keys(t);return e["x-file-name"]=i[0],t[i[0]];default:return t.toString()}};this.post=function(t,e,i,n,r){s.isFunction(i)&&(r=n,n=i,i={}),i.method="POST",i.headers=i.headers||{},i.uri=t,i.data=a(e,i.headers),i.headers["Content-length"]=i.data.length;var u=new o(i);return n&&u.on("data",n),r&&u.on("error",r),u},this.XMLHttpRequest=!0}).call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/extras/imageUtils",["require","exports","module","window"],function(t,e,i,n){var o={};(function(){var t=this;this.crossOrigin=void 0,this.map={},this.loadTexture=function(e,i,n,o){var r=new TextureLoader;r.setCrossOrigin(t.crossOrigin);var s=r.load(e,n,void 0,o);return i&&(s.mapping=i),s},this.loadImage=function(t,e,i,n){}}).call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/index",["require","exports","module","window"],function(t,e,i,n){(function(){var e=t("latte_lib"),i=t("./utils/hashMap"),n=new i,o=t("./utils/lib"),r=t("./renderer"),s=t("./object"),a=function(t,e){var i=this;this.type=e||a.defaultType,this.renderer=r.create(t,this.type),this.root=s.create("root",{x:0,y:0,width:this.renderer.width,height:this.renderer.height},{backgroundColor:"#000000"});var n={x:0,y:0};t.addEventListener("mousedown",function(t){},!1),t.addEventListener("mouseup",function(t){},!1),t.addEventListener("click",function(t){i.root.isDown({x:n.x,y:n.y},0)},!1),t.addEventListener("dblclick",function(t){},!1),t.addEventListener("mousewheel",function(t){},!1),t.addEventListener("mousemove",function(e){var i,o;e.pageX||e.pageY?(i=e.pageX,o=e.pageY):(i=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),i-=t.offsetLeft,o-=t.offsetTop,n.x=i,n.y=o},!1),t.addEventListener("mouseover",function(t){},!1),t.addEventListener("mouseout",function(t){},!1);var o={x:null,y:null,isPressed:!1};t.addEventListener("touchstart",function(t){o.isPressed=!0},!1),t.addEventListener("touchend",function(t){o.isPressed=!1,o.x=null,o.y=null},!1),t.addEventListener("touchmove",function(t){var e,i;touch_event=t.touches[0],touch_event.pageX||touch_event.pageY?(e=touch_event.pageX,i=touch_event.pageY):(e=touch_event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=touch_event.clientY+document.body.scrollTop+document.documentElement.scrollTop),e-=offsetLeft,i-=offsetTop,o.x=e,o.y=i},!1)};e.inherits(a,e.events),function(){this.setRoot=function(t){t.call(this.root)},this.run=function(){var t=[];this.root.update(0,t),this.renderer.draw(t)},this.add=function(t,e){this.root.add(t,e)},this.query=function(t){return this.root.query(t)},this.start=function(){var t=this,e=function(){t.run(),requestAnimationFrame(e)};requestAnimationFrame(e)},this.startOne=function(){this.run()}}.call(a.prototype),function(){this.types={"2d":{},"3d":{}},this.defaultType=function(){return"2d"}()}.call(a),this.get=function(t){if(e.isString(t)&&(t=document.getElementById(t),!t)){var i=document.createElement("canvas");i.id=t,t=i}if(!o.isDom(t,"canvas"))throw new Error("element type is not canvas  ");var r=n.get(t);return renderer||(r=new a(t),n.push(t,r)),r}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/loaders/textureLoader",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){var t=this;this.enabled=!1,this.files={},this.add=function(e,i){t.enabled!==!1&&(this.files[e]=i)},this.get=function(e){return t.enabled!==!1?this.files[e]:void 0},this.remove=function(e){delete t.files[e]},this.clear=function(){t.files={}}}).call(o)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/loaders/imageLoader",["require","exports","module","window"],function(t,e,i,n){var o=t("./cache"),r=function(t){this.manager=void 0!==t?t:DefaultLoadingManager};(function(){this.load=function(t,e,i,n){var r=this,s=o.get(t);if(void 0!==s)return r.manager.itemStart(t),e?setTimeout(function(){e(s),r.manager.itemEnd(t)},0):r.manager.itemEnd(t),s;var a=document.createElement("img");return a.addEventListener("load",function(i){o.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),void 0!==i&&a.addEventListener("progress",function(t){i(t)},!1),a.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a},this.setCrossOrigin=function(t){this.crossOrigin=t}}).call(r.prototype)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/loaders/loadingManager",["require","exports","module","window"],function(t,e,i,n){var o=function(t,e,i){var n=this,o=!1,r=0,s=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,o===!1&&void 0!==n.onStart&&n.onStart(url,r,s),o=!0},this.itemEnd=function(t){r++,void 0!==n.onProgress&&n.onProgress(t,r,s),r===s&&(o=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}};(function(){this.DefaultLoadingManager=new o}).call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/loaders/textureLoader",["require","exports","module","window"],function(t,e,i,n){var o=t("./loadingManager").DefaultLoadingManager,r=function(t){this.manager=void 0!==t?t:o};(function(){this.load=function(){var t=new Texture,e=new ImageLoader(this.manager);return e.setCrossOrigin(this.crossOrigin),loadder.load(url,function(e){t.image=e,t.needsUpdate=!0,void 0!==onLoad&&onLoad(t)},onProgress,onError),t},this.setCrossOrigin=function(t){this.crossorigin=t}}).call(r.prototype)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/math/euler",["require","exports","module","window"],function(t,e,i,n){var o=function(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||o.DefaultOrder};(function(){RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],DefaultOrder="XYZ"}).call(o),latte_lib.inherits(o,latte_lib.events),function(){Object.defineProperty(this,"x",{get:function(){return this._x},set:function(t){this._x=t,this.emit("change")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"y",{get:function(){return this._y},set:function(t){this._y=t,this.emit("change")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"z",{get:function(){return this._z},set:function(t){this._z=t,this.emit("change")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"order",{get:function(){return this._order},set:function(t){this._order=t,this.emit("change")},configurable:!1,enumerable:!1}),this.clone=function(){return new this.constructor(this._x,this._y,this._z)},this.copy=function(){return this._x=euler._x,this._y=euler._y,this._z=euler._z,this._order=euler._order,this.emit("change"),this},this.setFromVector3=function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},this.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},this.fromArray=function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},this.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},this.toVector3=function(t){return t?t.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)}}.call(o.prototype)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/math/quaternion",["require","exports","module","window"],function(t,e,i,n){var o=function(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1};latte_lib.inherits(Euler,latte_lib.events),function(){this.constructor=o,Object.defineProperty(this,"x",{get:function(){return this._x},set:function(t){this._x=t,this.emit("change")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"y",{get:function(){return this._y},set:function(t){this._y=t,this.emit("change")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"z",{get:function(){return this._z},set:function(t){this._z=t,this.emit("change")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"w",{get:function(){return this._w},set:function(t){this._w=t,this.emit("change")},configurable:!1,enumerable:!1}),this.clone=function(){return new this.constructor(this._x,this._y,this._z,this._w)},this.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.emit("change"),this},this.setFromEuler=function(t,e){if(t instanceof Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),o=Math.cos(t._z/2),r=Math.sin(t._x/2),s=Math.sin(t._y/2),a=Math.sin(t._z/2),u=t.order,c=r*n*o,l=i*s*a,h=i*s*o,f=r*n*a,d=i*n*a,m=r*s*o,p=i*n*o,y=r*s*a;return"XYZ"===u?(this._x=c+l,this._y=h-f,this._z=d+m,this._w=p-y):"YXZ"==u?(this._x=c+l,this._y=h-f,this._z=d-m,this._w=p+y):"ZXY"===u?(this._x=c-l,this._y=h+f,this._z=d+m,this._w=p-y):"ZYX"===u?(this._x=c-l,this._y=h+f,this._z=d-m,this._w=p+y):"YZX"===u&&(this._x=c-l,this._y=h-f,this._z=d+m,this._w=p+y),e!==!1&&this.emit("change"),this},this.setFromAxisAngle=function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.emit("change"),this},this.setFromRotationMatrix=function(t){var e,i=t.elements,n=i[0],o=i[4],r=i[8],s=i[1],a=i[5],u=i[9],c=i[2],l=i[6],h=i[10],f=n+a+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(r-c)*e,this._z=(s-o)*e):n>a&&n>h?(e=2*Math.sqrt(1+n-a-h),this._w=(l-u)/e,this._x=.25*e,this._y=(o+s)/e,this._z=(r+c)/e):a>h?(e=2*Math.sqrt(1+a-n-h),this._w=(r-c)/e,this._x=(o+s)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+h-n-a),this._w=(s-o)/e,this._x=(r+c)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},this.setFromUnitVectors=function(){var t,e,i=1e-6;return function(n,o){return void 0===t&&(t=new Vector3),e=n.dot(o)+1,i>e?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,o),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),this.inverse=function(){return this.conjugate().normalize(),this},this.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.emit("change"),this},this.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},this.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},this.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},this.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.emit("change"),this},this.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},this.multiplyQuaternions=function(t,e){var i=t._x,n=t._y,o=t._z,r=t._w,s=e._x,a=e._y,u=e._z,c=e._w;return this._x=i*c+r*s+n*u-o*a,this._y=n*c+r*a+o*s-i*u,this._z=o*c+r*u+i*a-n*s,this._w=r*c-i*s-n*a-o*u,this.onChangeCallback(),this},this.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},this.slerp=function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,o=this._z,r=this._w,s=r*t._w+i*t._x+n*t._y+o*t._z;if(0>s?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=r,this._x=i,this._y=n,this._z=o,this;var a=Math.acos(s),u=Math.sqrt(1-s*s);if(Math.abs(u)<.001)return this._w=.5*(r+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(o+this._z),this;var c=Math.sin((1-e)*a)/u,l=Math.sin(e*a)/u;return this._w=r*c+this._w*l,this._x=i*c+this._x*l,this._y=n*c+this._y*l,this._z=o*c+this._z*l,this.onChangeCallback(),this},this.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},this.fromArray=function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},this.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},this.onChange=function(t){return this.on("change",t),this}}.call(o.prototype)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/math/vector2",["require","exports","module","window"],function(t,e,i,n){var o=function(t,e){this.x=t||0,this.y=e||0};(function(){this.constructor=o,this.set=function(t,e){this.x=t,this.y=e},this.clone=function(t){return new this.constructor(this.x,this.y)},this.copy=function(t){this.x=t.x,this.y=t.y},this.add=function(t){return this.x+=t.x,this.y+=t.y,this},this.addScalar=function(t){return this.x+=t,this.y+=t,this},this.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},this.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},this.sub=function(t){return this.x-=t.x,this.y-=t.y,this},this.subScalar=function(t){return this.x-=t,this.y-=t,this},this.subvectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},this.multiply=function(t){return this.x*=t.x,this.y*=t,y,this},this.multiplyScalar=function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},this.divide=function(t){return this.x/=t.x,this.y/=t.y,this},this.divideScalar=function(t){return this.multiplyScalar(1/t)},this.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},this.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},this.clamp=function(){return this.x=Math.max(min.x,Math.min(max.x,this.x)),this.y=Math.max(min.y,Math.min(max.y,this.y)),this},this.clampScalar=function(){var t,e;return function(i,n){return void 0===t&&(t=new THREE.Vector2,e=new THREE.Vector2),t.set(i,i),e.set(n,n),this.clamp(t,e)}}(),this.clampLength=function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i),this},this.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},this.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},this.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},this.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},this.negate=function(){return this.x=-this.x,this.y=-this.y,this},this.dot=function(t){return this.x*t.x+this.y*t.y},this.lengthSq=function(){return this.x*this.x+this.y*this.y},this.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.lengthManhattan=function(){return Math.abs(this.x)+Math.abs(this.y)},this.normalize=function(){return this.divideScalar(this.length())},this.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},this.distanceToSquared=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},this.setLength=function(t){return this.multiplyScalar(length/this.length())},this.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},this.lerpvectors=function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t),this},this.equals=function(t){return t.x===this.x&&t.y===this.y},this.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},this.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},this.fromAttribute=function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this},this.rotateAround=function(t,e){var i=Math.cos(e),n=Math.sin(e),o=this.x-t.x,r=this.y-t.y;return this.x=o*i-r*n+t.x,this.y=o*n+r*i+t.y,this}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2AABB",["require","exports","module","window"],function(t,e,i,n){var o=t("../common/math/b2Vec2"),r=function(){this.lowerBound=new o,this.upperBound=new o};(function(){this.getCenter=function(){return new o((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},this.combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},this.contains=function(t){},this.testOverlap=function(t){var e=t.lowerBound.x-this.upperBound.x,i=t.lowerBound.y-this.upperBound.y,n=this.lowerBound.x-t.upperBound.x,o=this.lowerBound.y-t.upperBound.y;return e>0||i>0?!1:n>0||o>0?!1:!0}}).call(r.prototype),function(){this.combine=function(t,e){var i=new r;return i.combine(t,e),i}}.call(r),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2Bound",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2BoundValues",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2Collision",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2ContactID",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2Features"),r=function(){this.features=new o,this.init()};(function(){this.init=function(){this.features._m_id=this}}).call(r.prototype),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2ContactPoint",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2Distance",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2DistanceInput",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2DynamicTree",["require","exports","module","window"],function(t,e,i,n){var o=t("../common/b2Settings"),r=t("./b2DynamicTreeNode"),s=t("./b2AABB"),a=function(){this.init()};(function(){this.init=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},this.createProxy=function(t,e){var i=this.allocateNode(),n=o.aabbExtension,r=o.aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-n,i.aabb.lowerBound.y=t.lowerBound.y-r,i.aabb.upperBound.x=t.upperBound.x+n,i.aabb.upperBound.y=t.upperBound.y+r,i.userData=e,this.insertLeaf(i),i},this.allocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new r},this.insertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);var e=t.aabb.getCenter(),i=this.m_root;if(0==i.isLeaf())do{var n=i.child1,o=i.child2,r=Math.abs((n.aabb.lowerBound.x+n.aabb.upperBound.x)/2-e.x)+Math.abs((n.aabb.lowerBound.y+n.aabb.upperBound.y)/2-e.y),s=Math.abs((o.aabb.lowerBound.x+o.aabb.upperBound.x)/2-e.x)+Math.abs((o.aabb.lowerBound.y+o.aabb.upperBound.y)/2-e.y);i=s>r?n:o}while(0==i.isLeaf());var a=i.parent,u=this.allocateNode();if(u.parent=a,u.userData=null,u.aabb.combine(t.aabb,i.aabb),a){i.parent.child1==i?a.child1=u:a.child2=u,u.child1=i,u.child2=t,i.parent=u,t.parent=u;do{if(a.aabb.contains(u.aabb))break;a.aabb.combine(a.child1.aabb,a.child2.aabb),u=a,a=a.parent}while(a)}else u.child1=i,u.child2=t,i.parent=u,t.parent=u,this.m_root=u},this.getFatAABB=function(t){return t.aabb},this.query=function(t,e){if(null!=this.m_root){var i=new Array,n=0;for(i[n++]=this.m_root;n>0;){var o=i[--n];if(o.aabb.testOverlap(e))if(o.isLeaf()){var r=t(o);if(!r)return}else i[n++]=o.child1,i[n++]=o.child2}}},this.getUserData=function(t){return t.userData},this.moveProxy=function(t,e,i){if(o.assert(t.isLeaf()),t.aabb.contains(e))return!1;this.removeLeaf(t);var n=o.aabbExtension+o.aabbMultiplier*(i.x>0?i.x:-i.x),r=o.aabbExtension+o.aabbMultiplier*(i.y>0?i.y:-i.y);return t.aabb.lowerBound.x=e.lowerBound.x-n,t.aabb.lowerBound.y=e.lowerBound.y-r,t.aabb.upperBound.x=e.upperBound.x+n,t.aabb.upperBound.y=e.upperBound.y+r,this.insertLeaf(t),!0},this.removeLeaf=function(t){if(t==this.m_root)return void(this.m_root=null);var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,n)for(n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.freeNode(i);n;){var o=n.aabb;if(n.aabb=s.combine(n.child1.aabb,n.child2.aabb),o.contains(n.aabb))break;n=n.parent}else this.m_root=e,e.parent=null,this.freeNode(i)},this.freeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t}}).call(a.prototype),i.exports=a})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2DynamicTreeBroadPhase",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2DynamicTree"),r=t("./b2DynamicTreePair"),s=function(){this.m_tree=new o,this.m_moveBuffer=new Array,this.m_pairBuffer=new Array,this.m_pairCount=0};(function(){this.createProxy=function(t,e){var i=this.m_tree.createProxy(t,e);return++this.m_proxyCount,this.bufferMove(i),i},this.bufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t};this.updatePairs=function(t){function e(t){if(t==n)return!0;i.m_pairCount==i.m_pairBuffer.length&&(i.m_pairBuffer[i.m_pairCount]=new r);var e=i.m_pairBuffer[i.m_pairCount];return e.proxyA=n>t?t:n,e.proxyB=t>=n?t:n,++i.m_pairCount,!0}var i=this;i.m_pairCount=0;var n,o=0;for(o=0;o<i.m_moveBuffer.length;++o){n=i.m_moveBuffer[o];var s=i.m_tree.getFatAABB(n);i.m_tree.query(e,s)}i.m_moveBuffer.length=0;for(var o=0;o<i.m_pairCount;){var a=i.m_pairBuffer[o],u=i.m_tree.getUserData(a.proxyA),c=i.m_tree.getUserData(a.proxyB);for(t(u,c),++o;o<i.m_pairCount;){var l=i.m_pairBuffer[o];if(l.proxyA!=a.proxyA||l.proxyB!=a.proxyB)break;++o}}},this.moveProxy=function(t,e,i){var n=this.m_tree.moveProxy(t,e,i);n&&this.bufferMove(t)},this.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),n=this.m_tree.getFatAABB(e);return i.testOverlap(n)}}).call(s.prototype),i.exports=s})}("function"==typeof define?define:function(t,e,i){
i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2DynamicTreeNode",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2AABB"),r=function(){this.aabb=new o};(function(){this.isLeaf=function(){return null==this.child1}}).call(r.prototype),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2DynamicTreePair",["require","exports","module","window"],function(t,e,i,n){var o=(t("./b2AABB"),function(){});(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2Features",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2Manifold",["require","exports","module","window"],function(t,e,i,n){var o=t("../common/b2Settings"),r=t("./b2ManifoldPoint"),s=function(){this.m_pointCount=0,this.init()};(function(){this.init=function(){this.m_points=new Array(o.maxManifoldPoints);for(var t=0;t<o.maxManifoldPoints;t++)this.m_points[t]=new r;this.m_localPlaneNormal=new Vec2,this.m_localPoint=new Vec2}}).call(s.prototype),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/b2ManifoldPoint",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2ContactID"),r=function(){this.m_localPoint=new Vec2,this.m_id=new o};(function(){}).call(r.prototype),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/shapes/b2CircleShape",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2Shape"),r=t("../../common/math/b2Vec2"),s=t("../../common/b2Settings"),a=t("latte_lib"),u=function(t){o.apply(this,arguments),this.m_p=new r,this.init(t)};a.inherits(u,o),function(){this.init=function(t){void 0===t&&(t=0),o.call(this),this.m_type=o.e_circleShape,this.m_radius=t},this.copy=function(){var t=new u;return t.set(this),t},this.set=function(t){o.prototype.set.call(this,t),t instanceof u&&this.m_p.setV(t.m_p)},this.computeAABB=function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),o=e.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);t.lowerBound.set(n-this.m_radius,o-this.m_radius),t.upperBound.set(n+this.m_radius,o+this.m_radius)},this.computeMass=function(t,e){void 0===e&&(e=0),t.mass=e*s.pi*this.m_radius*this.m_radius,t.center.setV(this.m_p),t.I=t.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))}}.call(u.prototype),i.exports=u})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/shapes/b2MassData",["require","exports","module","window"],function(t,e,i,n){var o=t("../../common/math/b2Vec2"),r=t("./b2Shape"),s=t("latte_lib"),a=function(){this.mass=0,this.center=new o(0,0),this.I=0};s.inherits(a,r),function(){this.init=function(){r.call(this,arguments)}}.call(a.prototype),i.exports=a})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/shapes/b2PolygonShape",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=t("./b2Shape"),s=t("../../common/math/b2Vec2"),a=function(){r.apply(this,arguments),this.init()};o.inherits(a,r),function(){this.init=function(){r.call(this),this.m_type=r.e_polygonShape,this.m_centroid=new s,this.m_vertices=new Array,this.m_normals=new Array},this.Reserve=function(t){void 0===t&&(t=0);for(var e=parseInt(this.m_vertices.length);t>e;e++)this.m_vertices[e]=new s,this.m_normals[e]=new s},this.SetAsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()}}.call(a.prototype),i.exports=a})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/collision/shapes/b2Shape",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),function(){this.e_unknownShape=parseInt(-1),this.e_circleShape=0,this.e_polygonShape=1,this.e_edgeShape=2,this.e_shapeTypeCount=3,this.e_hitCollide=1,this.e_missCollide=0,this.e_startsInsideCollide=parseInt(-1)}.call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/b2Color",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_box2d"),r=t("./math/math"),s=function(t,e,i){this.init(t,e,i)};(function(){Object.defineProperty(this,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),this.set=this.init=function(t,e,i){t=t||0,e=e||0,i=i||0,this._r=o.parseUInt(255*r.clamp(t,0,1)),this._g=o.parseUInt(255*r.clamp(e,0,1)),this._b=o.parseUInt(255*r.clamp(i,0,1))}}).call(s.prototype),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/b2Settings",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),function(){this.USHRT_MAX=65535,this.pi=Math.PI,this.maxManifoldPoints=2,this.aabbExtension=.1,this.aabbMultiplier=2,this.polygonRadius=2*o.b2_linearSlop,this.linearSlop=.005,this.angularSlop=2/180*o.b2_pi,this.toiSlop=8*o.b2_linearSlop,this.maxTOIContactsPerIsland=32,this.maxTOIJointsPerIsland=32,this.velocityThreshold=1,this.maxLinearCorrection=.2,this.maxAngularCorrection=8/180*o.b2_pi,this.maxTranslation=2,this.maxTranslationSquared=o.b2_maxTranslation*o.b2_maxTranslation,this.maxRotation=.5*o.b2_pi,this.maxRotationSquared=o.b2_maxRotation*o.b2_maxRotation,this.contactBaumgarte=.2,this.timeToSleep=.5,this.linearSleepTolerance=.01,this.angularSleepTolerance=2/180*o.b2_pi,this.assert=function(t){if(!t)throw"Assertion Failed"}}.call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/math/b2Mat22",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2Vec2"),r=function(){this.col1=new o,this.col2=new o};(function(){this.init=this.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},this.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.x=0},this.FromAngle=function(t){void 0===t&&(t=0);var e=new r;return e.Set(t),e},this.FromVV=function(t,e){var i=new r;return i.SetVV(t,e),i},this.Set=function(t){void 0===t&&(t=0);var e=Math.cos(t),i=Math.sin(t);this.col1.x=e,this.col2.x=-i,this.col1.y=i,this.col2.y=e},this.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},this.Copy=function(){var t=new r;return t.SetM(this),t}}).call(r.prototype),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/math/b2Math",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),function(){this.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},this.Dot=function(t,e){return t.x*e.x+t.y*e.y},this.CrossVV=function(t,e){return t.x*e.y-t.y*e.x}}.call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/math/b2Sweep",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2Vec2"),r=function(){this.localCenter=new o,this.c0=new o,this.c=new o};(function(){this.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},this.Copy=function(){var t=new r;return t.Set(this),this},this.GetTransform=function(t,e){void 0===e&&(e=0),t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y;var i=(1-e)*this.a0+e*this.a;t.R.Set(i);var n=t.R;t.position.x-=n.col1.x*this.localCenter.x+n.col2.x*this.localCenter.y,t.position.y-=n.col1.y*this.localCenter.x+n.col2.y*this.localCenter.y},this.Advance=function(t){if(void 0===t&&(t=0),this.t0<t&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*tihs.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}}}).call(r.prototype),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/math/b2Transform",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2Vec2"),r=t("./b2Mat22"),s=function(t,e){this.position=new o,this.R=new r,this.init(t,e)};(function(){this.init=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.position.SetV(t),this.R.SetM(e))},this.SetIdentity=function(){this.position.SetZero(),this.R.setIdentity()},this.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},this.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)}}).call(s.prototype),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/math/b2Vec2",["require","exports","module","window"],function(t,e,i,n){var o=function(t,e){this.Set(t,e)};(function(){this.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},this.SetZero=function(t,e){this.x=0,this.y=0},this.SetV=function(t){this.x=t.x,this.y=t.y},this.GetMegative=function(){return new o(-this.x,-this.y)},this.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},this.Copy=function(t,e){return new o(this.x,this.y)},this.Add=function(t){this.x+=t.x,this.y+=t.y},this.Subtract=function(t){this.x-=t.x,this.y-=t.y},this.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},this.MinV=function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y)},this.MaxV=function(t){this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y)},this.Abs=function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y)},this.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.LengthSquared=function(){return this.x*this.x+this.y*this.y},this.Normalize=function(){var t=this.Length();if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,t},this.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)}}).call(o.prototype),function(){this.create=this.Make=function(t,e){return new o(t,e)}}.call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/common/math/b2Vec3",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2Body",["require","exports","module","window"],function(t,e,i,n){var o=t("../common/math/b2Transform"),r=t("../common/math/b2Sweep"),s=t("../common/math/b2Vec2"),a=function(t,e){this.m_xf=new o,this.m_sweep=new r,this.m_linearVelocity=new s,this.m_force=new s,this.init(t,e)};(function(){this.init=function(t,e){this.m_flags=0,t.bullet&&(this.m_flags|=a.e_bulletFlag),t.fixedRotation&&(this.m_flags|=a.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=a.e_allowSleepFlag),t.awake&&(this.m_flags|=a.e_awakeFlag),t.active&&(this.m_flags|=a.e_activeFlag),this.m_world=e,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var i=this.m_xf.R,n=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*n.x+i.col2.x*n.y,this.m_sweep.c.y=i.col1.y*n.y+i.col2.y*n.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,this.m_type==a.b2_dynamicBody&&(this.m_mass=1,this.m_invMass=1),this.m_I=0,this.m_invI=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},this.createFixture=function(t){if(1==this.m_world.IsLocked())return null;var e=new b2Fixture;if(e.Create(this,this.m_xf,t),this.m_flags&a.e_activeFlag){var i=this.m_world.m_contactManager.m_broadPhase;e.CreateProxy(i,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=b2World.e_newFixture,e}}).call(a.prototype),function(){this.b2_staticBody=0,this.b2_kinematicBody=1,this.b2_dynamicBody=2}.call(a),i.exports=a})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2BodyDef",["require","exports","module","window"],function(t,e,i,n){var o=t("../common/math/b2Vec2"),r=function(){this.position=new o,this.linearVelocity=new o};(function(){this.init=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.set(0,0),this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=b2Body.b2_staticBody,this.active=!0,this.inertiaScale=1}}).call(r.prototype),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2ContactFilter",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){this.shouldCollide=function(t,e){var i=t.getFilterData(),n=e.getFilterData();return i.groupIndex==n.groupIndex&&0!=i.groupIndex?i.groupIndex>0:0!=(i.maskBits&n.categoryBits)&&0!=(i.categoryBits&n.maskBits)}}).call(o.prototype),function(){this.defaultFilter=new o}.call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2ContactListener",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){this.preSolve=function(t,e){}}).call(o.prototype),o.defaultListener=new o,i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2ContactManager",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2ContactFilter"),r=t("./b2ContactListener"),s=t("./contacts/b2ContactFactory"),a=t("../collision/b2DynamicTreeBroadPhase"),u=t("./b2Fixture"),c=t("./contacts/b2Contact"),l=function(){this.init()};(function(){this.init=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=o.defaultFilter,this.m_contactListener=r.defaultListener,this.m_contactFactory=new s(this.m_allocator),this.m_broadPhase=new a},this.collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.getFixtureA(),i=t.getFixtureB(),n=e.getBody(),o=i.getBody();if(0!=n.isAwake()||0!=o.isAwake()){if(t.m_flags&c.e_filterFlag){if(0==o.shouldCollide(n)){var r=t;t=r.getNext(),this.destroy(r);continue}if(0==this.m_contactFilter.shouldCollide(e,i)){r=t,t=r.getNext(),this.destroy(r);continue}t.m_flags&=~c.e_filterFlag}var s=e.m_proxy,a=i.m_proxy,u=this.m_broadPhase.testOverlap(s,a);0!=u?(t.update(this.m_contactListener),t=t.getNext()):(r=t,t=r.getNext(),this.destroy(r))}else t=t.getNext()}},this.findNewContacts=function(){var t=this;this.m_broadPhase.updatePairs(function(){t.addPair.apply(t,arguments)})},this.addPair=function(t,e){var i=t instanceof u?t:null,n=e instanceof u?e:null,o=i.getBody(),r=n.getBody();if(o!=r){for(var s=r.getContactList();s;){if(s.other==o){var a=s.contact.getFixtureA(),c=s.contact.getFixtureB();if(a==i&&c==n)return;if(a==n&&c==i)return}s=s.next}if(0!=r.shouldCollide(o)&&0!=this.m_contactFilter.shouldCollide(i,n)){var l=this.m_contactFactory.create(i,n);i=l.getFixtureA(),n=l.getFixtureB(),o=i.m_body,r=n.m_body,l.m_prev=null,l.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=l),this.m_world.m_contactList=l,l.m_nodeA.contact=l,l.m_nodeA.other=r,l.m_nodeA.prev=null,l.m_nodeA.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=l.m_nodeA),o.m_contactList=l.m_nodeA,l.m_nodeB.contact=l,l.m_nodeB.other=o,l.m_nodeB.prev=null,l.m_nodeB.next=r.m_contactList,null!=r.m_contactList&&(r.m_contactList.prev=l.m_nodeB),r.m_contactList=l.m_nodeB,++this.m_world.m_contactCount}}}}).call(l.prototype),function(){}.call(l),i.exports=l})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2ContactSolver",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2TimeStep"),r=t("./contacts/b2ContactConstraint"),s=t("../common/b2Settings"),a=function(){this.init()};(function(){this.init=function(){this.m_step=new o,this.m_constraints=new Array},this.initialize=function(t,e,i,n){void 0===i&&(i=0);var o;this.m_step.set(t),this.m_allocator=n;var s=0;for(this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new r;for(s=0;i>s;++s){o=e[s];var a=o.m_fixtureA,u=o.m_fixtureB,c=a.m_shape,l=u.m_shape,h=c.m_radius,f=l.m_radius,d=a.m_body,m=u.m_body,p=o.GetManifold(),y=b2Settings.b2MixFriction(a.GetFriction(),u.GetFriction()),_=b2Settings.b2MixRestitution(a.GetRestitution(),u.GetRestitution()),x=d.m_linearVelocity.x,v=d.m_linearVelocity.y,b=m.m_linearVelocity.x,g=m.m_linearVelocity.y,w=d.m_angularVelocity,S=m.m_angularVelocity;b2Settings.b2Assert(p.m_pointCount>0),b2ContactSolver.s_worldManifold.Initialize(p,d.m_xf,h,m.m_xf,f);var C=b2ContactSolver.s_worldManifold.m_normal.x,A=b2ContactSolver.s_worldManifold.m_normal.y,B=this.m_constraints[s];B.bodyA=d,B.bodyB=m,B.manifold=p,B.normal.x=C,B.normal.y=A,B.pointCount=p.m_pointCount,B.friction=y,B.restitution=_,B.localPlaneNormal.x=p.m_localPlaneNormal.x,B.localPlaneNormal.y=p.m_localPlaneNormal.y,B.localPoint.x=p.m_localPoint.x,B.localPoint.y=p.m_localPoint.y,B.radius=h+f,B.type=p.m_type;for(var q=0;q<B.pointCount;++q){var M=p.m_points[q],I=B.points[q];I.normalImpulse=M.m_normalImpulse,I.tangentImpulse=M.m_tangentImpulse,I.localPoint.SetV(M.m_localPoint);var E=I.rA.x=b2ContactSolver.s_worldManifold.m_points[q].x-d.m_sweep.c.x,j=I.rA.y=b2ContactSolver.s_worldManifold.m_points[q].y-d.m_sweep.c.y,T=I.rB.x=b2ContactSolver.s_worldManifold.m_points[q].x-m.m_sweep.c.x,L=I.rB.y=b2ContactSolver.s_worldManifold.m_points[q].y-m.m_sweep.c.y,R=E*A-j*C,k=T*A-L*C;R*=R,k*=k;var O=d.m_invMass+m.m_invMass+d.m_invI*R+m.m_invI*k;I.normalMass=1/O;var F=d.m_mass*d.m_invMass+m.m_mass*m.m_invMass;F+=d.m_mass*d.m_invI*R+m.m_mass*m.m_invI*k,I.equalizedMass=1/F;var D=A,V=-C,P=E*V-j*D,z=T*V-L*D;P*=P,z*=z;var N=d.m_invMass+m.m_invMass+d.m_invI*P+m.m_invI*z;I.tangentMass=1/N,I.velocityBias=0;var G=b+-S*L-x- -w*j,U=g+S*T-v-w*E,X=B.normal.x*G+B.normal.y*U;X<-b2Settings.b2_velocityThreshold&&(I.velocityBias+=-B.restitution*X)}if(2==B.pointCount){var Y=B.points[0],H=B.points[1],Z=d.m_invMass,W=d.m_invI,K=m.m_invMass,J=m.m_invI,Q=Y.rA.x*A-Y.rA.y*C,$=Y.rB.x*A-Y.rB.y*C,tt=H.rA.x*A-H.rA.y*C,et=H.rB.x*A-H.rB.y*C,it=Z+K+W*Q*Q+J*$*$,nt=Z+K+W*tt*tt+J*et*et,ot=Z+K+W*Q*tt+J*$*et,rt=100;rt*(it*nt-ot*ot)>it*it?(B.K.col1.Set(it,ot),B.K.col2.Set(ot,nt),B.K.GetInverse(B.normalMass)):B.pointCount=1}}},this.solveVelocityConstraints=function(){for(var t,e,i=0,n=0,o=0,r=0,s=0,a=0,u=0,c=0,l=0,h=0,f=0,d=0,m=0,p=0,y=0,_=0,x=0;x<this.m_constraintCount;++x){var v=this.m_constranints[x],b=v.bodyA,g=v.bodyB,w=b.m_angularVelocity,S=g.m_angularVelocity,C=b.m_linearVelocity,A=g.m_linearVelocity,B=b.m_invMass,q=b.m_invI,M=g.m_invMass,I=g.m_invI,E=v.normal.x,j=v.normal.y,T=E,L=-E,R=v.friction;for(i=0;i<v.pointCount;i++)t=v.points[i],n=A.x-S*t.rB.y-C.x+w*t.rA.y,o=A.y+S*t.rB.x-C.y-w*t.rA.x,s=n*T+o*L,a=t.tangentMass*-s,u=R*t.normalImpulse,c=mMath.clamp(t.tangentImpulse+a,-u,u),a=c-t.tangentImpulse,l=a*T,h=a*L,C.x-=B*l,C.y-=B*h,w-=q*(t.rA.x*h-t.rA.y*l),A.x+=M*l,A.y+=M*h,S+=I*(t.rB.x*h-t.rB.y*l),t.tangentImpulse=c;parseInt(v.pointCount);if(1==v.pointCount)t=v.points[0],n=A.x+-S*t.rB.y-C.x- -w*t.rA.y,o=A.y+S*t.rB.x-C.y-w*t.rA.x,r=n*E+o*j,a=-t.normalMass*(r-t.velocityBias),c=t.normalImpulse+a,c=c>0?c:0,a=c-t.normalImpulse,l=a*E,h=a*j,C.x-=B*l,C.y-=B*h,w-=q*(t.rA.x*h-t.rA.y*l),A.x+=M*l,A.y+=M*h,S+=I*(t.rB.x*h-t.rB.y*l),t.normalImpulse=c;else{var k=v.points[0],O=v.points[1],F=k.normalImpulse,D=O.normalImpulse,V=vb.x-S*k.rB.y-C.x+w*k.rA.y,P=A.y+S*k.rB.x-C.y-w*k.rA.x,z=A.x-S*O.rB.y-C.x+w*O.rA.y,N=A.y+S*O.rB.x-C.y-w*O.rA.x,G=V*E+P*j,U=z*E+N*j,X=G-k.velocityBias,Y=U-O.velocityBias;e=v.K,X-=e.col1.x*F+e.col2.x*D,Y-=e.col1.y*F+e.col2.y*D;for(;;){e=v.normalMass;var H=-(e.col1.x*X+e.col2.x*Y),Z=-(e.col1.y*X+e.col2.y*Y);if(H>=0&&Z>=0){f=H-F,d=Z-D,m=f*E,p=f*j,y=d*E,_=d*j,C.x-=B*(m+y),C.y-=B*(p+_),w-=q*(k.rA.x*p-k.rA.y*m+O.rA.x*_-O.rA.y*y),A.x+=M*(m+y),A.y+=M*(p+_),S+=I*(k.rB.x*p-k.rB.y*m+O.rB.x*_-O.rB.y*y),k.normalImpulse=H,O.normalImpulse=Z;break}if(H=-k.normalMass*X,Z=0,G=0,U=v.K.col1.y*H+Y,H>=0&&U>=0){f=H-F,d=Z-D,m=f*E,p=f*j,y=d*E,_=d*j,C.x-=B*(m+y),C.y-=B*(p+_),w-=q*(k.rA.x*p-k.rA.y*m+O.rA.x*_-O.rA.y*y),A.x+=M*(m+y),A.y+=M*(p+_),S+=I*(k.rB.x*p-k.rB.y*m+O.rB.x*_-O.rB.y*y),k.normalImpulse=H,O.normalImpulse=Z;break}if(H=0,Z=-O.normalMass*Y,G=v.K.col2.x*Z+X,U=0,Z>=0&&G>=0){f=H-F,d=Z-D,m=f*E,p=f*j,y=d*E,_=d*j,C.x-=B*(m+y),C.y-=B*(p+_),w-=q*(k.rA.x*p-k.rA.y*m+O.rA.x*_-O.rA.y*y),A.x+=M*(m+y),A.y+=M*(p+_),S+=I*(k.rB.x*p-k.rB.y*m+O.rB.x*_-O.rB.y*y),k.normalImpulse=H,O.normalImpulse=Z;break}if(H=0,Z=0,G=X,U=Y,G>=0&&U>=0){f=H-F,d=Z-D,m=f*E,p=f*j,y=d*E,_=d*j,C.x-=B*(m+y),C.y-=B*(p+_),w-=q*(k.rA.x*p-k.rA.y*m+O.rA.x*_-O.rA.y*y),A.x+=M*(m+y),A.y+=M*(p+_),S+=I*(k.rB.x*p-k.rB.y*m+O.rB.x*_-O.rB.y*y),k.normalImpulse=H,O.normalImpulse=Z;break}break}}b.m_angularVelocity=w,g.m_angularVelocity=S}},this.initVelocityConstraints=function(t,e,i,n){void 0===i&&(i=0);var o;this.m_step.set(t),this.m_allocator=n;var u=0;for(this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new r;for(u=0;i>u;++u){o=e[u];var c=o.m_fixtureA,l=o.m_fixtureB,h=c.m_shape,f=l.m_shape,d=h.m_radius,m=f.m_radius,p=c.m_body,y=l.m_body,_=o.GetManifold(),x=s.MixFriction(c.GetFriction(),l.GetFriction()),v=s.MixRestitution(c.GetRestitution(),l.GetRestitution()),b=p.m_linearVelocity.x,g=p.m_linearVelocity.y,w=y.m_linearVelocity.x,S=y.m_linearVelocity.y,C=p.m_angularVelocity,A=y.m_angularVelocity;s.Assert(_.m_pointCount>0),a.s_worldManifold.Initialize(_,p.m_xf,d,y.m_xf,m);var B=b2ContactSolver.s_worldManifold.m_normal.x,q=b2ContactSolver.s_worldManifold.m_normal.y,M=this.m_constraints[u];M.bodyA=p,M.bodyB=y,M.manifold=_,M.normal.x=B,M.normal.y=q,M.pointCount=_.m_pointCount,M.friction=x,M.restitution=v,M.localPlaneNormal.x=_.m_localPlaneNormal.x,M.localPlaneNormal.y=_.m_localPlaneNormal.y,M.localPoint.x=_.m_localPoint.x,M.localPoint.y=_.m_localPoint.y,M.radius=d+m,M.type=_.m_type;for(var I=0;I<M.pointCount;++I){var E=_.m_points[I],j=M.points[I];j.normalImpulse=E.m_normalImpulse,j.tangentImpulse=E.m_tangentImpulse,j.localPoint.SetV(E.m_localPoint);var T=j.rA.x=b2ContactSolver.s_worldManifold.m_points[I].x-p.m_sweep.c.x,L=j.rA.y=b2ContactSolver.s_worldManifold.m_points[I].y-p.m_sweep.c.y,R=j.rB.x=b2ContactSolver.s_worldManifold.m_points[I].x-y.m_sweep.c.x,k=j.rB.y=b2ContactSolver.s_worldManifold.m_points[I].y-y.m_sweep.c.y,O=T*q-L*B,F=R*q-k*B;O*=O,F*=F;var D=p.m_invMass+y.m_invMass+p.m_invI*O+y.m_invI*F;j.normalMass=1/D;var V=p.m_mass*p.m_invMass+y.m_mass*y.m_invMass;V+=p.m_mass*p.m_invI*O+y.m_mass*y.m_invI*F,j.equalizedMass=1/V;var P=q,z=-B,N=T*z-L*P,G=R*z-k*P;N*=N,G*=G;var U=p.m_invMass+y.m_invMass+p.m_invI*N+y.m_invI*G;j.tangentMass=1/U,j.velocityBias=0;var X=w+-A*k-b- -C*L,Y=S+A*R-g-C*T,H=M.normal.x*X+M.normal.y*Y;H<-b2Settings.b2_velocityThreshold&&(j.velocityBias+=-M.restitution*H)}if(2==M.pointCount){var Z=M.points[0],W=M.points[1],K=p.m_invMass,J=p.m_invI,Q=y.m_invMass,$=y.m_invI,tt=Z.rA.x*q-Z.rA.y*B,et=Z.rB.x*q-Z.rB.y*B,it=W.rA.x*q-W.rA.y*B,nt=W.rB.x*q-W.rB.y*B,ot=K+Q+J*tt*tt+$*et*et,rt=K+Q+J*it*it+$*nt*nt,st=K+Q+J*tt*it+$*et*nt,at=100;at*(ot*rt-st*st)>ot*ot?(M.K.col1.Set(ot,st),M.K.col2.Set(st,rt),M.K.getInverse(M.normalMass)):M.pointCount=1}}},this.finalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t)for(var e=this.m_constraints[t],i=e.manifold,n=0;n<e.pointCount;++n){var o=i.m_points[n],r=e.points[n];o.m_normalImpulse=r.normalImpulse,o.m_tangentImpulse=r.tangentImpulse}},this.solvePositionConstraints=function(t){void 0===t&&(t=0);for(var e=0,i=0;i<this.m_constraintCount;i++){var n=this.m_constraints[i],o=n.bodyA,r=n.bodyB,u=o.m_mass*o.m_invMass,c=o.m_mass*o.m_invI,l=r.m_mass*r.m_invMass,h=r.m_mass*r.m_invI;a.s_psm.initialize(n);for(var f=a.s_psm.m_normal,d=0;d<n.pointCount;d++){var m=n.points[d],p=a.s_psm.m_points[d],y=a.s_psm.m_separations[d],_=p.x-o.m_sweep.c.x,x=p.y-o.m_sweep.c.y,v=p.x-r.m_sweep.c.x,b=p.y-r.m_sweep.c.y;e=y>e?e:y;var g=mMath.clamp(t*(y+s.linearSlop),-s.maxLinearCorrection,0),w=-m.equalizedMass*g,S=w*f.x,C=w*f.y;o.m_sweep.c.x-=u*S,o.m_sweep.c.y-=u*C,o.m_sweep.a-=c*(_*C-x*S),o.synchronizeTransform(),r.m_sweep.c.x+=l*S,r.m_sweep.c.y+=l*C,r.m_sweep.a+=h*(v*C-b*S),r.synchronizeTransform()}}return e>-1.5*s.b2_linearSlop}}).call(a.prototype),i.exports=a})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2DebugDraw",["require","exports","module","window"],function(t,e,i,n){var o=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}},this.init()};(function(){this.init=function(){this.m_drawFlags=0},this.setSprite=function(t){this.m_ctx=t},this.setDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},this.setFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},this.setLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},this.setFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},this.getFlags=function(){return this.m_drawFlags},this.drawSolidCircle=function(t,e,i,n){if(e){var o=this.m_ctx,r=this.m_drawScale,s=t.x*r,a=t.y*r;o.moveTo(0,0),o.beginPath(),o.strokeStyle=this._color(n.color,this.m_alpha),o.fillStyle=this._color(n.color,this.m_fillAlpha),o.arc(s,a,e*r,0,2*Math.PI,!0),o.moveTo(s,a),o.lineTo((t.x+i.x*e)*r,(t.y+i.y*e)*r),o.closePath(),o.fill(),o.stroke()}},this._color=function(t,e){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},this.drawSolidPolygon=function(t,e,i){if(e){var n=this.m_ctx,o=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.fillStyle=this._color(i.color,this.m_fillAlpha),n.moveTo(t[0].x*o,t[0].y*o);for(var r=1;e>r;r++)n.lineTo(t[r].x*o,t[r].y*o);n.lineTo(t[0].x*o,t[0].y*o),n.closePath(),n.fill(),n.stroke()}}}).call(o.prototype),function(){this.e_shapeBit=1,this.e_jointBit=2,this.e_aabbBit=4,this.e_pairBit=8,this.e_centerOfMassBit=16,this.e_controllerBit=32}.call(o),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2FilterData",["require","exports","module","window"],function(t,e,i,n){var o=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0};(function(){this.clone=function(){var t=new o;return t.categoryBits=1,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2Fixture",["require","exports","module","window"],function(t,e,i,n){var o=t("../collision/b2AABB"),r=t("../collision/shapes/b2MassData"),s=t("../common/math/b2Math"),a=t("./b2FilterData"),u=function(){this.m_filter=new a,this.init()};(function(){this.init=function(){this.m_aabb=new o,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},this.create=function(t,e,i){this.m_userData=i.userData,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_body=t,this.m_next=null,this.m_filter=i.filter.copy(),this.m_isSensor=i.isSensor,this.m_shape=i.shape.copy(),this.m_density=i.density},this.createProxy=function(t,e){this.m_shape.computeAABB(this.m_aabb,e),this.m_proxy=t.createProxy(this.m_aabb,this)},this.getMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new r),this.m_shape.computeMass(t,this.m_density),t},this.getBody=function(){return this.m_body},this.synchronize=function(t,e,i){if(this.m_proxy){var n=new o,r=new o;this.m_shape.computeAABB(n,e),this.m_shape.computeAABB(r,i),this.m_aabb.combine(n,r);var a=s.subtractVV(i.position,e.position);t.moveProxy(this.m_proxy,this.m_aabb,a)}},this.getShape=function(){return this.m_shape},this.getFilterData=function(){return this.m_filter.copy()},this.getType=function(){return this.m_shape.getType()},this.isSensor=function(){return this.m_isSensor}}).call(u.prototype),i.exports=u})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2FixtureDef",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2FilterData"),r=function(){this.filter=new o,this.init()};(function(){this.init=function(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.groupIndex=0,this.isSensor=!1}}).call(r.prototype),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2Island",["require","exports","module","window"],function(t,e,i,n){var o=t("../common/b2Settings"),r=t("../common/math/b2Math"),s=function(){this.init()};(function(){this.init=function(){this.m_bodies=new Array,this.m_contacts=new Array,this.m_joints=new Array},this.initialize=function(t,e,i,n,o,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var s=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=n,this.m_listener=o,this.m_contactSolver=r,s=this.m_bodies.length;t>s;s++)this.m_bodies[s]=null;for(s=this.m_contacts.length;e>s;s++)this.m_contacts[s]=null;for(s=this.m_joints.length;i>s;s++)this.m_joints[s]=null},this.clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},this.addBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},this.solve=function(t,e,i){var n,s,a=0,u=0;for(a=0;a<this.m_bodyCount;++a)n=this.m_bodies[a],n.getType()==Body.dynamicBody&&(n.m_linearVelocity.x+=t.dt*(e.x+n.m_invMass*n.m_force.x),n.m_linearVelocity.y+=t.dt*(e.x+n.m_invMass*n.m_force.y),n.m_angularVelocity+=t.dt*n.m_invI*n.m_torque,
n.m_linearVelocity.multiply(r.clamp(1-t.dt*n.m_linearDamping,0,1)),n.m_angularVelocity*=r.clamp(1-t.dt*n.m_angularDamping,0,1));this.m_contactSolver.initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var c=this.m_contactSolver;for(c.initVelocityConstraints(t),a=0;a<this.m_jointCount;++a)s=this.m_joints[a],s.initVelocityConstraints(t);for(a=0;a<t.velocityIterations;++a){for(u=0;u<this.m_jointCount;++u)s=this.m_joints[u],s.solveVelocityConstraints(t);c.solveVelocityConstraints()}for(a=0;a<this.m_jointCount;++a)s=this.m_joints[a],s.finalizeVelocityConstraints();for(c.finalizeVelocityConstraints(),a=0;a<this.m_bodyCount;++a)if(n=this.m_bodies[a],n.getType()!=Body.staticBody){var l=t.dt*n.m_linearVelocity.x,h=t.dt*n.m_linearVelocity.y;l*l+h*h>o.maxTranslationSquared&&(n.m_linearVelocity.normalize(),n.m_linearVelocity.x*=o.maxTranslation*t.inv_dt,n.m_linearVelocity.y*=o.maxTranslation*t.inv_dt);var f=t.dt*n.m_angularVelocity;f*f>o.maxRotationSquared&&(n.m_angularVelocity=n.m_angularVelocity<0?-o.maxRotation*t.inv_dt:o.maxRotation*t.inv_dt),n.m_sweep.c0.setV(n.m_sweep.c),n.m_sweep.a0=n.m_sweep.a,n.m_sweep.c.x+=t.dt*n.m_linearVelocity.x,n.m_sweep.c.y+=t.dt*n.m_linearVelocity.y,n.m_sweep.a+=t.dt*n.m_angularVelocity,n.synchronizeTransform()}for(a=0;a<t.positionIterations;++a){var d=c.solvePositionConstraints(o.b2_contactBaumgarte),m=!0;for(u=0;u<this.m_jointCount;++u){s=this.m_joints[u];var p=s.solvePositionConstraints(o.b2_contactBaumgarte);m=m&&p}if(d&&m)break}if(this.report(c.m_constraints),i){var y=Number.MAX_VALUE,_=o.linearSlinearSleepTolerance*o.linearSlinearSleepTolerance,x=o.angularSleepTolerance*o.angularSleepTolerance;for(a=0;a<this.m_bodyCount;++a)n=this.m_bodies[a],n.getType()!=Body.staticBody&&(0==(n.m_flags&Body.e_allowSleepFlag)&&(n.m_sleepTime=0,y=0),0==(n.m_flags&Body.e_allowSleepFlag)||n.m_angularVelocity*n.m_angularVelocity>x||r.dot(n.m_linearVelocity,n.m_linearVelocity)>_?(n.m_sleepTime=0,y=0):(n.m_sleepTime+=t.dt,y=r.min(y,n.m_sleepTime)));if(y>=o.timeToSleep)for(a=0;a<this.m_bodyCount;++a)n=this.m_bodies[a],n.setAwake(!1)}},this.report=function(t){if(null!=this.m_listener)for(var e=0;e<this.m_contactCount;++e){for(var i=this.m_contacts[e],n=t[e],o=0;o<n.pointCount;++o)s.s_impulse.normalImpulses[o]=n.points[o].normalImpulse,s.s_impulse.tangentImpulses[o]=n.points[o].tangentImpulse;this.m_listener.postSolve(i,s.s_impulse)}}}).call(s.prototype),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2TimeStep",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){this.set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/b2World",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2ContactManager"),r=t("./b2ContactSolver"),s=t("./b2Island"),a=t("./b2Body"),u=function(){this.s_stack=new Array,this.m_contactManager=new o,this.m_contactSolver=new r,this.m_island=new s};(function(){this.init=function(){this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerCount=0,this.m_jointCount=0,this.m_controllerCount=0,u.m_warmStarting=!0,u.m_continuousPhysics=!0,this.m_allowSleep=doSleep,this.m_gravity=gravity,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var t=new b2BodyDef;this.m_groundBody=this.CreateBody(t)},this.CreateBody=function(t){if(1==this.IsLocked)return null;var e=new a(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e}}).call(u.prototype),i.exports=u})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2CircleContact",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=t("./b2Contact"),s=function(){};o.inherits(s,r),function(){this.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();b2Collision.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2CircleShape?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof b2CircleShape?this.m_fixtureB.GetShape():null,e.m_xf)}}.call(s.prototype),function(){this.Create=function(){return new s},this.Destroy=function(t,e){}}.call(s),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2Contact",["require","exports","module","window"],function(t,e,i,n){var o=t("./b2ContactEdge"),r=t("../../collision/b2Manifold"),s=function(){this.m_nodeA=new o,this.m_nodeB=new o,this.m_manifold=new r,this.m_oldManifold=new r};(function(){}).call(s.prototype),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2ContactConstraint",["require","exports","module","window"],function(t,e,i,n){var o=t("../../common/math/b2Vec2"),r=t("../../common/math/b2Mat22"),s=t("../../common/b2Settings"),a=t("./b2ContactConstraintPoint"),u=function(){this.localPlaneNormal=new o,this.localPoint=new o,this.normal=new o,this.normalMass=new r,this.K=new r,this.init()};(function(){this.init=function(){this.points=new Array(s.b2_maxManifoldPoints);for(var t=0;t<s.b2_maxManifoldPoints;t++)this.points[t]=new a}}).call(u.prototype),i.exports=u})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2ContactConstraintPoint",["require","exports","module","window"],function(t,e,i,n){var o=function(){this.localPoint=new b2Vec2,this.rA=new b2Vec2,this.rB=new b2Vec2};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2ContactEdge",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2ContactFactory",["require","exports","module","window"],function(t,e,i,n){var o=t("../../collision/shapes/b2Shape"),r=t("./b2CircleContact"),s=t("./b2ContactRegister"),a=t("./b2PolyAndCircleContact"),u=t("./b2PolygonContact"),c=t("./b2EdgeAndCircleContact"),l=t("./b2PolyAndEdgeContact"),h=function(t){this.init(t)};(function(){this.init=function(t){this.m_allocator=t,this.InitializeRegisters()},this.AddType=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.m_registers[i][n].createFcn=t,this.m_registers[i][n].destroyFcn=e,this.m_registers[i][n].primary=!0,i!=n&&(this.m_registers[n][i].createFcn=t,this.m_registers[n][i].destroyFcn=e,this.m_registers[n][i].primary=!1)},this.Create=function(t,e){var i,n=(parseInt(t.GetType()),parseInt(e.GetType())),o=this.m_registers[typ1][n];if(o.pool)return i=o.pool,o.pool=i.m_next,o.poolCount--,i.Reset(t,e),i;var r=o.createFcn;return null!=r?o.primary?(i=r(this.m_allocator),i.Reset(t,e),i):(i=r(this.m_allocator),i.Reset(e,t),i):null},this.InitializeRegisters=function(){this.m_registers=new Array(o.e_shapeTypeCount);for(var t=0;t<o.e_shapeTypeCount;t++){this.m_registers[t]=new Array(o.e_shapeTypeCount);for(var e=0;e<o.e_shapeTypeCount;e++)this.m_registers[t][e]=new s}this.AddType(r.Create,r.Destroy,o.e_circleShape,o.e_circleShape),this.AddType(a.Create,a.Destroy,o.e_polygonShape,o.e_circleShape),this.AddType(u.Create,u.Destroy,o.e_polygonShape,o.e_polygonShape),this.AddType(c.Create,c.Destroy,o.e_edgeShape,o.e_circleShape),this.AddType(l.Create,l.Destroy,o.e_polygonShape,o.e_edgeShape)},this.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=parseInt(t.m_fixtureA.GetType()),i=parseInt(t.m_fixtureB.GetType()),n=this.m_registers[e][i];n.poolCount++,t.m_next=n.pool,n.pool=t;var o=n.destroyFcn;o(t,this.m_allocator)}}).call(h.prototype),function(){}.call(h),i.exports=h})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2ContactRegister",["require","exports","module","window"],function(t,e,i,n){var o=(t("latte_lib"),t("./b2Contact"),function(){});i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2EdgeAndCircleContact",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=t("./b2Contact"),s=function(){};o.inherits(s,r),function(){this.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2EdgeShape?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof b2CircleShape?this.m_fixtureB.GetShape():null,e.m_xf)}}.call(s.prototype),function(){this.Create=function(){return new s},this.Destroy=function(t,e){}}.call(s),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2PolyAndCircleContact",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=t("./b2Contact"),s=function(){};o.inherits(s,r),function(){this.Reset=function(t,e){r.prototype.Reset.call(this,t,e),b2Settings.b2Assert(t.GetType()==b2Shape.e_polygonShape),b2Settings.b2Assert(e.GetType()==b2Shape.e_circleShape)},this.Evaluate=function(){var t=this.m_fixtureA.m_body,e=this.m_fixtureB.m_body;b2Collision.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2PolygonShape?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof b2CircleShape?this.m_fixtureB.GetShape():null,e.m_xf)}}.call(s.prototype),function(){this.Create=function(){return new s},this.Destroy=function(t,e){}}.call(s),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2PolyAndEdgeContact",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=t("./b2Contact"),s=function(){};o.inherits(s,r),function(){this.Reset=function(t,e){this.b2Contact.prototype.Reset.call(this,t,e),b2Settings.b2Assert(t.GetType()==b2Shape.e_polygonShape),b2Settings.b2Assert(e.GetType()==b2Shape.e_edgeShape)},this.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2PolygonShape?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof b2EdgeShape?this.m_fixtureB.GetShape():null,e.m_xf)},this.b2CollidePolyAndEdge=function(t,e,i,n,o){}}.call(s.prototype),function(){this.Create=function(){return new s},this.Destroy=function(t,e){}}.call(s),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/box/dynamics/contacts/b2PolygonContact",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=t("./b2Contact"),s=function(){};o.inherits(s,r),function(){this.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();b2Collision.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof b2PolygonShape?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof b2PolygonShape?this.m_fixtureB.GetShape():null,e.m_xf)}}.call(s.prototype),function(){this.Create=function(){return new s},this.Destroy=function(t,e){}}.call(s),i.exports=s})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/collision",["require","exports","module","window"],function(t,e,i,n){var o=function(){};(function(){}).call(o.prototype),function(){this.create=function(){return new o}}.call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/index",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=t("./transform"),s=t("./collision"),a=function(t,e,i){this.attribute=i||{},this.childers={},this.partner=null,this.name=t,this.type="object",this.visible=!0,this.transform=r.create(e),this.collision=s.create(e),this.events=new o.events};(function(){this.getPath=function(t){if(null==this.partner)return"";for(var e=this.partner,i=this.name;e!=t;)i=e.name+"/"+i,e=e.partner;return i},this.addChild=function(t){this.childers[t.name]=this.childers[t.name]||[],this.childers[t.name].push(t),t.partner=this},this.setAttribute=function(t,e){this.attribute[t]=e},this.removeChilde=function(t){var e=this.childers[t.name].indexOf(t);o.removeArray(this.childers[t.name],e),t.partner=null},this.query=function(t){o.isString(t)&&(t=t.split("/"));var e=t.shift();if(!e)return[this];var i=[];return this.childers[e]&&this.childers[e].forEach(function(t){i=i.concat(t.query(e))}),i},this.add=function(t,e){if(o.isString(t)&&(t=t.split("/")),!t.length)return this.addChild(e);var i=t.shift();if(this.childers[i])this.childers[i].forEach(function(i){i.add(o.copy(t),e)});else{var n=a.create(i);this.addChild(n),n.add(t,e)}},this.update=function(t,e,i){var n=this,o=this.doUpdate(t,e,i);return t++,Object.keys(this.childers).forEach(function(i){n.childers[i].forEach(function(i){i.update(t,e,o)})}),e},this.doUpdate=function(t,e,i){var n=this.transform.update(i);return n.type="rectangle",n.index=t,n.backgroundColor=this.attribute.backgroundColor,e.push(n),n},this.isDown=function(t,e,i){var n=[],o=this.transform.update(i);this.transform["in"](t,o)&&n.push({index:e,object:this}),e++;var r=this;if(Object.keys(this.childers).forEach(function(i){r.childers[i].forEach(function(i){var r=i.isDown(t,e,o);r&&n.push(r)})}),0==n.length)return null;var s={index:-1};return n.forEach(function(t){t.index>s.index&&(s=t)}),-1==s.index?null:(i||s.object.emit("click",a.createEvent(s.object)),s)},this.on=function(t,e){this.events.on(t,e)},this.emit=function(t,e){this.events.emit(t,e),!e.stop&&this.partner&&this.partner.emit(t,e)}}).call(a.prototype),function(){this.create=function(t,e,i){return new a(t,e,i)},this.createDefault=function(){return new a},this.createEvent=function(t){var e={};return e._stop=!1,e.object=t,Object.defineProperty(e,"stop",{set:function(t){this._stop=t},get:function(){return this._stop}}),e}}.call(a),i.exports=a})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/object/transform",["require","exports","module","window"],function(t,e,i,n){var o=function(t){this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,this.position=t.position||"relative"};(function(){this.update=function(t){t||(t=o.defaultObject);var e={};switch(this.position){case"absolute":e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height;break;case"relative":default:e.x=t.x+this.x,e.y=t.y+this.y,e.width=this.width,e.height=this.height}return e},this["in"]=function(t,e){return e.x<t.x&&t.x<e.x+e.width&&e.y<t.y&&t.y<e.y+e.height?!0:!1}}).call(o.prototype),function(){this.defaultObject={x:0,y:0,width:0,height:0}}.call(o),function(){this.create=function(t){return t||(t={}),new o(t)}}.call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/renderer/2D/renderer2D",["require","exports","module","window"],function(t,e,i,n){var o=function(t,e){this.context=t.getContext("2d"),this.width=t.width,this.height=t.height};(function(){this.draw=function(t){var e=this;t.forEach(function(t){e.drawOne(t)})},this.drawOne=function(t){switch(t.type){case"image":var e=t.image;this.context.drawIamge(e.resources,e.x,e.y,e.width,e.height,t.x,t.y,t.width||e.width,t.height||e.height);break;case"rectangle":this.context.fillStyle=t.backgroundColor,this.context.fillRect(t.x,t.y,t.width,t.height)}},this.clear=function(){this.context.clearRect(0,0,this.width,this.height)}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/renderer/3D/renderer3D",["require","exports","module","window"],function(t,e,i,n){var o=function(t,e){this.context=t.getContext("2d")};(function(){this.draw=function(t){var e=this;t.forEach(function(t){e.drawOne(t)})},this.drawOne=function(t){switch(t.type){case"image":this.context.fillStyle=t.fillStyle,iamge=utils.getImage(t.image),this.context.drawImage(image,t.x,t.y,t.height,t.width)}},this.clear=function(){}}).call(o.prototype),i.exports=o})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/renderer/index",["require","exports","module","window"],function(t,e,i,n){(function(){var e=this;this.renderers={"2d":t("./2D/renderer2D"),"3d":t("./3D/renderer3D")},this.create=function(t,i){return new e.renderers[i](t)}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/utils/hashMap",["require","exports","module","window"],function(t,e,i,n){var o=t("latte_lib"),r=function(){this.keys={},this.values={}};(function(){this.push=function(t,e){var i=r.getCode(t),n=r.getCode(e);this.keys[n]=t,this.values[i]=e},this.get=function(t){var e=r.getCode(t);return this.values[e]},this.getKey=function(t){var e=r.getCode(key);return this.values[e]}}).call(r.prototype),function(){var t=0;this.getCode=function(e){return o.isString(e)?e:e.code?e.code:(e.code=t++,e.code)}}.call(r),i.exports=r})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)}),function(t){"use strict";t("latte_renderer/utils/lib",["require","exports","module","window"],function(t,e,i,n){(function(){this.isDom="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}}).call(i.exports)})}("function"==typeof define?define:function(t,e,i){i(require,exports,module)});